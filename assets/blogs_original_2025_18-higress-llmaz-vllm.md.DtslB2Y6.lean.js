import{_ as e}from"./chunks/ArticleMetadata.B38I6HZO.js";import{_ as k,C as o,c as r,o as t,k as l,G as F,P as d,a as g,w as c,b as y,e as C}from"./chunks/framework.DIkCQIk8.js";import"./chunks/md5.BFEskVOY.js";const f=JSON.parse('{"title":"ä½¿ç”¨ Higress AI ç½‘å…³ä»£ç† vLLM æ¨ç†æœåŠ¡","description":"","frontmatter":{"title":"ä½¿ç”¨ Higress AI ç½‘å…³ä»£ç† vLLM æ¨ç†æœåŠ¡","author":"Se7en","date":"2025/06/11 10:00","categories":["AI"],"tags":["AI","Inference"]},"headers":[],"relativePath":"blogs/original/2025/18-higress-llmaz-vllm.md","filePath":"blogs/original/2025/18-higress-llmaz-vllm.md","lastUpdated":1749650481000}'),u={name:"blogs/original/2025/18-higress-llmaz-vllm.md"};function D(i,s,q,m,A,B){const h=e,p=o("ClientOnly");return t(),r("div",null,[s[0]||(s[0]=l("h1",{id:"ä½¿ç”¨-higress-ai-ç½‘å…³ä»£ç†-vllm-æ¨ç†æœåŠ¡",tabindex:"-1"},[g("ä½¿ç”¨ Higress AI ç½‘å…³ä»£ç† vLLM æ¨ç†æœåŠ¡ "),l("a",{class:"header-anchor",href:"#ä½¿ç”¨-higress-ai-ç½‘å…³ä»£ç†-vllm-æ¨ç†æœåŠ¡","aria-label":'Permalink to "ä½¿ç”¨ Higress AI ç½‘å…³ä»£ç† vLLM æ¨ç†æœåŠ¡"'},"â€‹")],-1)),F(p,null,{default:c(()=>{var a,n;return[(((a=i.$frontmatter)==null?void 0:a.aside)??!0)&&(((n=i.$frontmatter)==null?void 0:n.showArticleMetadata)??!0)?(t(),y(h,{key:0,article:i.$frontmatter},null,8,["article"])):C("",!0)]}),_:1}),s[1]||(s[1]=d(`<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">â€‹</a></h2><p>éšç€å¤§è¯­è¨€æ¨¡å‹æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šå’Œç»„ç»‡å¼€å§‹è€ƒè™‘åœ¨æœ¬åœ°ç§æœ‰åŒ–éƒ¨ç½²æ¨¡å‹ï¼Œä»¥æ»¡è¶³æ•°æ®å®‰å…¨ã€åˆè§„æ€§å’Œä½å»¶è¿Ÿç­‰éœ€æ±‚ã€‚åœ¨ä¼—å¤šçš„å¤§æ¨¡å‹æ¨ç†å¼•æ“ä¸­ï¼ŒvLLM å‡­å€Ÿå…¶å“è¶Šçš„æ€§èƒ½å’Œé«˜æ•ˆçš„èµ„æºåˆ©ç”¨ç‡ï¼Œå·²æˆä¸ºç›®å‰æœ€çƒ­é—¨çš„ LLM æ¨ç†å¼•æ“ä¹‹ä¸€ã€‚</p><p>è™½ç„¶ vLLM æœ¬èº«æ€§èƒ½å“è¶Šï¼Œä½†è¦æ„å»ºä¸€ä¸ªçœŸæ­£é¢å‘ç”Ÿäº§ç¯å¢ƒçš„ vLLM æ¨ç†æœåŠ¡ä»å­˜åœ¨ä¸€å®šæŒ‘æˆ˜ã€‚ä¾‹å¦‚ï¼Œå¤§æ¨¡å‹æ¨ç†æœåŠ¡é€šå¸¸éœ€è¦åº”å¯¹æµé‡åˆ†å‘ã€æ•…éšœè½¬ç§»ç­‰é«˜å¯ç”¨æ€§éœ€æ±‚ï¼ŒåŒæ—¶åœ¨éƒ¨ç½²å±‚é¢ä¹Ÿé¢ä¸´èµ„æºè°ƒåº¦ã€æ¨¡å‹åŠ è½½å’ŒæœåŠ¡ç¼–æ’ç­‰æ–¹é¢çš„å¤æ‚æ€§ã€‚</p><h2 id="llmaz-å’Œ-higress-ä»‹ç»" tabindex="-1">llmaz å’Œ Higress ä»‹ç» <a class="header-anchor" href="#llmaz-å’Œ-higress-ä»‹ç»" aria-label="Permalink to &quot;llmaz å’Œ Higress ä»‹ç»&quot;">â€‹</a></h2><p>ä¸ºåº”å¯¹ä¸Šè¿°æŒ‘æˆ˜ï¼Œæœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•é€šè¿‡ llmaz å¿«é€Ÿéƒ¨ç½² vLLM å®ä¾‹ï¼Œå¹¶å€ŸåŠ© Higress å®ç°æµé‡æ§åˆ¶ä¸å¯è§‚æµ‹æ€§ï¼Œä»è€Œæ„å»ºä¸€ä¸ªç¨³å®šã€é«˜å¯ç”¨çš„å¤§æ¨¡å‹æœåŠ¡å¹³å°ã€‚</p><p><a href="https://github.com/InftyAI/llmaz" target="_blank" rel="noreferrer">llmaz</a> æ˜¯ä¸€ä¸ªåŸºäº Kubernetes æ„å»ºçš„å¤§è¯­è¨€æ¨¡å‹æ¨ç†å¹³å°ï¼Œæ—¨åœ¨ä¸ºå¤šæ¨¡å‹ã€å¤šæ¨ç†åç«¯çš„æœåŠ¡åœºæ™¯æä¾›ç»Ÿä¸€ä¸”é«˜æ•ˆçš„éƒ¨ç½²è§£å†³æ–¹æ¡ˆã€‚llmaz åŸç”Ÿæ”¯æŒ vLLMã€SGLangã€Text-Generation-Inferenceã€llama.cppã€TensorRT-LLM ç­‰å¤šç§ä¸»æµæ¨ç†å¼•æ“ï¼Œå¹¶é€šè¿‡æ™ºèƒ½è°ƒåº¦æœºåˆ¶çµæ´»é€‚é…å¼‚æ„ GPUï¼Œæœ€å¤§åŒ–èµ„æºåˆ©ç”¨ç‡ä¸æ¨ç†æ€§èƒ½ã€‚llmaz æ”¯æŒä» HuggingFaceã€ModelScope ä»¥åŠå¯¹è±¡å­˜å‚¨è‡ªåŠ¨åŠ è½½æ¨¡å‹ï¼Œæ˜¾è‘—ç®€åŒ–æ¨¡å‹ç®¡ç†æµç¨‹ï¼Œé™ä½éƒ¨ç½²ä¸ä½¿ç”¨é—¨æ§›ã€‚</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202506112121195.png" alt=""></p><p><a href="https://github.com/alibaba/higress" target="_blank" rel="noreferrer">Higress</a> ä½œä¸ºä¸€æ¬¾äº‘åŸç”Ÿ API ç½‘å…³ï¼Œå¯ä»¥å®Œç¾åœ°æ‰®æ¼”å¤§æ¨¡å‹æœåŠ¡å‰ç½®çš„ AI ç½‘å…³è§’è‰²ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Higress çš„ä¸°å¯ŒåŠŸèƒ½å®ç°æ¨¡å‹æœåŠ¡çš„å¯è§‚æµ‹æ€§ã€æµé‡æ§åˆ¶ã€æ•…éšœè½¬ç§»ç­‰å…³é”®èƒ½åŠ›ï¼Œä¸ºå¤§æ¨¡å‹åº”ç”¨æä¾›æ›´åŠ ç¨³å®šå’Œå¯é çš„åŸºç¡€è®¾æ–½æ”¯æŒã€‚</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202506112123006.png" alt=""></p><h3 id="å‰ææ¡ä»¶" tabindex="-1">å‰ææ¡ä»¶ <a class="header-anchor" href="#å‰ææ¡ä»¶" aria-label="Permalink to &quot;å‰ææ¡ä»¶&quot;">â€‹</a></h3><p>éœ€è¦å‡†å¤‡å¥½ä¸€ä¸ª GPU Kubernetes é›†ç¾¤ï¼Œæœ¬å®éªŒéœ€è¦ç”¨åˆ° 2 å— GPUã€‚å¯ä»¥å‚è€ƒè¯¥æ•™ç¨‹éƒ¨ç½² GPU é›†ç¾¤ï¼š<a href="https://mp.weixin.qq.com/s/TNXrDr59wxcAZF9MhUJGjw" target="_blank" rel="noreferrer">ä¸€é”®éƒ¨ç½² GPU Kind é›†ç¾¤ï¼Œä½“éªŒ vLLM æé€Ÿæ¨ç†</a>ã€‚</p><h2 id="å®‰è£…-higress" tabindex="-1">å®‰è£… Higress <a class="header-anchor" href="#å®‰è£…-higress" aria-label="Permalink to &quot;å®‰è£… Higress&quot;">â€‹</a></h2><p>Higress å¯ä»¥é€šè¿‡ Helm Chart å®‰è£…ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> higress.io</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://higress.cn/helm-charts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> higress</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> higress-system</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> higress.io/higress</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --create-namespace</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --render-subchart-notes</span></span></code></pre></div><p>ä½¿ç”¨ <code>kubectl port-forward</code> å‘½ä»¤å°† Higress Console æœåŠ¡è½¬å‘åˆ°æœ¬åœ°ç«¯å£ï¼Œæ–¹ä¾¿æœ¬åœ°è®¿é—®æ§åˆ¶å°ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> port-forward</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> higress-system</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> svc/higress-console</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 8080</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:8080</span></span></code></pre></div><p>æ‰“å¼€æµè§ˆå™¨è®¿é—® <code>http://127.0.0.1:8080</code>ï¼Œå³å¯è®¿é—® Higress Consoleã€‚é¦–æ¬¡ç™»å½•éœ€è¦åˆå§‹åŒ–æ§åˆ¶å°çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202506111159450.png" alt=""></p><h2 id="å®‰è£…-llmaz" tabindex="-1">å®‰è£… llmaz <a class="header-anchor" href="#å®‰è£…-llmaz" aria-label="Permalink to &quot;å®‰è£… llmaz&quot;">â€‹</a></h2><p>llmaz å¯ä»¥é€šè¿‡ Helm Chart å®‰è£…ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> llmaz</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> oci://registry-1.docker.io/inftyai/llmaz</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> llmaz-system</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --create-namespace</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --version</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.10</span></span></code></pre></div><p>å¦‚æœä½ çš„æ¨¡å‹éœ€è¦ HuggingFace Token æ‰èƒ½ä¸‹è½½ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»º <code>modelhub-secret</code> Secretã€‚ä¾‹å¦‚ï¼Œä¸‹é¢ä½¿ç”¨çš„ <code>google/gemma-2-2b-it</code> æ¨¡å‹å°±éœ€è¦ HuggingFace Tokenï¼Œå¹¶ä¸”ä½ è¿˜éœ€è¦åœ¨è¯¥æ¨¡å‹çš„ <a href="https://huggingface.co/google/gemma-2-2b-it" target="_blank" rel="noreferrer">HuggingFace é¡µé¢</a> ä¸ŠåŒæ„ç›¸å…³è®¸å¯æ¡æ¬¾åæ‰èƒ½ä½¿ç”¨ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> secret</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> generic</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> modelhub-secret</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --from-literal=HF_TOKEN=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">your</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> toke</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span></span></code></pre></div><h2 id="ä½¿ç”¨-llmaz-éƒ¨ç½²-vllm-æ¨ç†æœåŠ¡" tabindex="-1">ä½¿ç”¨ llmaz éƒ¨ç½² vLLM æ¨ç†æœåŠ¡ <a class="header-anchor" href="#ä½¿ç”¨-llmaz-éƒ¨ç½²-vllm-æ¨ç†æœåŠ¡" aria-label="Permalink to &quot;ä½¿ç”¨ llmaz éƒ¨ç½² vLLM æ¨ç†æœåŠ¡&quot;">â€‹</a></h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ llmaz éƒ¨ç½²ä¸¤ä¸ªä¸åŒçš„å¤§è¯­è¨€æ¨¡å‹ï¼šé˜¿é‡Œäº‘çš„ <code>Qwen/Qwen2.5-1.5B-Instruct</code> å’Œ Google çš„ <code>google/gemma-2-2b-it</code>ã€‚è¿™ä¸¤ä¸ªæ¨¡å‹éƒ½å°†ä½¿ç”¨ vLLM ä½œä¸ºæ¨ç†å¼•æ“ï¼Œæ¯ä¸ªæ¨¡å‹åˆ†é…ä¸€å— GPU èµ„æºã€‚</p><p>åœ¨ llmaz ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ç§ç±»å‹çš„èµ„æºï¼š</p><ol><li><code>OpenModel</code> - å®šä¹‰æ¨¡å‹çš„æ¥æºå’ŒåŸºæœ¬ä¿¡æ¯ã€‚</li><li><code>Playground</code> - å®šä¹‰æ¨¡å‹çš„è¿è¡Œæ—¶é…ç½®ï¼ŒåŒ…æ‹¬èµ„æºåˆ†é…å’Œæ¨ç†å¼•æ“ã€‚<code>Playground</code> ä¸­éœ€è¦é…ç½®æ¨¡å‹è¿è¡Œçš„ <code>BackendRuntime</code>ï¼Œllmaz æä¾›äº†é¢„å®šä¹‰çš„ <code>vllm</code>ï¼ˆé»˜è®¤ï¼‰ã€<code>sglang</code>ã€<code>tensorrt-llm</code> å’Œ <code>llamacpp</code> ç­‰å¤šç§å¼€ç®±å³ç”¨çš„æ¨ç†å¼•æ“ã€‚</li></ol><p>å°†ä»¥ä¸‹ YAML æ–‡ä»¶åº”ç”¨åˆ° Kubernetes é›†ç¾¤ä¸­ã€‚</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">llmaz.io/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">OpenModel</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">qwen2-1-5b</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  familyName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">qwen2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  source</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    modelHub</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      modelID</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Qwen/Qwen2.5-1.5B-Instruct</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference.llmaz.io/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Playground</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">qwen2-1-5b</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  modelClaim</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    modelName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">qwen2-1-5b</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  backendRuntimeConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    backendName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    resources</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      limits</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        cpu</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;4&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        memory</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">16Gi</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        nvidia.com/gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;1&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      requests</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        cpu</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;4&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        memory</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">16Gi</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        nvidia.com/gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;1&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">llmaz.io/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">OpenModel</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">gemma-2-2b</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  familyName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">gemma</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  source</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    modelHub</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      modelID</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">google/gemma-2-2b-it</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference.llmaz.io/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Playground</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">gemma-2-2b</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  modelClaim</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    modelName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">gemma-2-2b</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  backendRuntimeConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    backendName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    resources</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      limits</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        cpu</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;4&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        memory</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">16Gi</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        nvidia.com/gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;1&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      requests</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        cpu</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;4&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        memory</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">16Gi</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        nvidia.com/gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;1&quot;</span></span></code></pre></div><p>ç¡®è®¤ vLLM Pod éƒ½å·²ç»æˆåŠŸ Runningï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pods</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">                        READY</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    RESTARTS</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">gemma-2-2b-0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">                1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">          16</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">qwen2-1-5b-0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">                1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">          13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">m</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> svc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">                  TYPE</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        CLUSTER-IP</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">       EXTERNAL-IP</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">S</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)    </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">AGE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">gemma-2-2b</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">            ClusterIP</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   None</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">             &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     21</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">gemma-2-2b-lb</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">         ClusterIP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   100.108</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.18.194</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">        8080</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/TCP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   21</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">qwen2-1-5b</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">            ClusterIP</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   None</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">             &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     21</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">qwen2-1-5b-lb</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">         ClusterIP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   100.106</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.253.20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">        8080</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/TCP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   21</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">m</span></span></code></pre></div><h2 id="é…ç½®-higress-ä»£ç†-vllm-æ¨ç†æœåŠ¡" tabindex="-1">é…ç½® Higress ä»£ç† vLLM æ¨ç†æœåŠ¡ <a class="header-anchor" href="#é…ç½®-higress-ä»£ç†-vllm-æ¨ç†æœåŠ¡" aria-label="Permalink to &quot;é…ç½® Higress ä»£ç† vLLM æ¨ç†æœåŠ¡&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œä¸ºä¸¤ä¸ª vLLM æ¨ç†æœåŠ¡åˆ†åˆ«åˆ›å»ºå¯¹åº”çš„ <code>AI Service Provider</code>ã€‚ç”±äº vLLM åŸç”Ÿå…¼å®¹ OpenAI åè®®ï¼Œå› æ­¤åœ¨åˆ›å»º <code>AI Service Provider</code> æ—¶å¯ä»¥é€‰æ‹©ç±»å‹ä¸º <code>OpenAI</code>ï¼Œå¹¶è®¾ç½®è‡ªå®šä¹‰çš„ Base URLï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">http://qwen2-1-5b-lb.default.svc.cluster.local:8080/v1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">http://gemma-2-2b-lb.default.svc.cluster.local:8080/v1</span></span></code></pre></div><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202506111202366.png" alt=""></p><p>åˆ›å»ºå¥½çš„ AI Service Provider å¦‚ä¸‹ï¼š</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202506111206804.png" alt=""></p><p>æ¥ä¸‹æ¥åˆ›å»ºå¯¹åº”çš„ AI Routeï¼Œæ ¹æ®è¯·æ±‚ä½“ä¸­çš„ <code>model</code> å­—æ®µè¿›è¡ŒåŒ¹é…ï¼Œå°†è¯·æ±‚è·¯ç”±åˆ°å¯¹åº”çš„æ¨¡å‹æœåŠ¡ã€‚</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202506111211353.png" alt=""></p><p>åˆ›å»ºå¥½çš„ AI Route å¦‚ä¸‹ï¼š</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202506111215072.png" alt=""></p><blockquote><p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨ Kubernetes YAML æ¥é…ç½® AI Service Provider å’Œ AI Routeï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š<a href="https://github.com/cr7258/hands-on-lab/blob/main/gateway/higress/ai-proxy/on-premises/ai-route.yaml" target="_blank" rel="noreferrer">https://github.com/cr7258/hands-on-lab/blob/main/gateway/higress/ai-proxy/on-premises/ai-route.yaml</a></p></blockquote><h2 id="é€šè¿‡-higress-ai-ç½‘å…³è®¿é—®-vllm-æ¨ç†æœåŠ¡" tabindex="-1">é€šè¿‡ Higress AI ç½‘å…³è®¿é—® vLLM æ¨ç†æœåŠ¡ <a class="header-anchor" href="#é€šè¿‡-higress-ai-ç½‘å…³è®¿é—®-vllm-æ¨ç†æœåŠ¡" aria-label="Permalink to &quot;é€šè¿‡ Higress AI ç½‘å…³è®¿é—® vLLM æ¨ç†æœåŠ¡&quot;">â€‹</a></h2><p>ä½¿ç”¨ <code>kubectl port-forward</code> å‘½ä»¤å°† Higress Gateway æœåŠ¡è½¬å‘åˆ°æœ¬åœ°ç«¯å£ï¼Œæ–¹ä¾¿è¿›è¡Œæµ‹è¯•ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> port-forward</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> higress-system</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> svc/higress-gateway</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 18000</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:80</span></span></code></pre></div><p>é¦–å…ˆè¯·æ±‚ qwen2-1-5b æ¨¡å‹ï¼Œæ¨¡å‹åç§°ç¡®ä¿å’Œ llmaz OpenModel å®šä¹‰çš„ <code>modelName</code> ä¸€è‡´ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> http://localhost:18000/v1/chat/completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;Content-Type: application/json&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;model&quot;: &quot;qwen2-1-5b&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;messages&quot;: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">            &quot;role&quot;: &quot;user&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">            &quot;content&quot;: &quot;Who are you?&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        ]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      }&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># å“åº”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;choices&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;finish_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;stop&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;index&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;message&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;content&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;I am Qwen, developed by Alibaba Cloud. I am a large language model created to assist with tasks such as answering questions, providing information, and generating text based on the input given. I can help with a variety of topics, including but not limited to, natural language processing, computer vision, and applications of machine learning. Please feel free to ask me any questions you might have or provide feedback on how I can improve my abilities.&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;reasoning_content&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;role&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;assistant&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;tool_calls&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">         },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;stop_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">   ],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;created&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1749615329</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;id&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;chatcmpl-bad4e501-fa2c-4af1-a30f-74b34a6a753d&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;model&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;qwen2-1-5b&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;object&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;chat.completion&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;prompt_logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;usage&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;completion_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 89</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;prompt_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 33</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;prompt_tokens_details&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;total_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 122</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ç„¶åè®¿é—® gemma-2-2b æ¨¡å‹ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚ä¹ŸæˆåŠŸäº†ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> http://localhost:18000/v1/chat/completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;Content-Type: application/json&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;model&quot;: &quot;gemma-2-2b&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;messages&quot;: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">            &quot;role&quot;: &quot;user&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">            &quot;content&quot;: &quot;Who are you?&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        ]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      }&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># å“åº”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;choices&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;finish_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;stop&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;index&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;message&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;content&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;Hello! I am Gemma, an AI assistant created by the Gemma team. I am a large language model, which means I&#39;m very good at understanding and generating human-like text. \\n\\nHere are some things to keep in mind about me:\\n\\n* **I&#39;m an open-weights model:** This means I&#39;m transparent, and anyone can access and use my code. \\n* **I&#39;m text-only:**  I can only communicate through text - I can&#39;t see images or videos, or process sound. \\n* **I don&#39;t have access to the internet:** I can&#39;t provide you with real-time information or browse the web. \\n* **I&#39;m here to help:** I am ready to answer your questions, generate creative text formats, translate languages, and much more.\\n\\nHow can I help you today? ğŸ˜Š \\n&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;reasoning_content&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;role&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;assistant&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;tool_calls&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">         },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;stop_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 107</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">   ],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;created&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1749615455</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;id&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;chatcmpl-83cd88b1-2426-4856-b201-6deff1292645&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;model&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;gemma-2-2b&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;object&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;chat.completion&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;prompt_logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;usage&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;completion_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 184</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;prompt_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;prompt_tokens_details&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;total_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 197</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ä½ ä¹Ÿå¯ä»¥åŠ ä¸Š <code>&quot;stream&quot;: true</code> å‚æ•°æ¥å®ç°æµå¼è¿”å›ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> http://localhost:18000/v1/chat/completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;Content-Type: application/json&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;model&quot;: &quot;qwen2-1-5b&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;messages&quot;: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">            &quot;role&quot;: &quot;user&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">            &quot;content&quot;: &quot;Who are you?&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        ],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;stream&quot;: true</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      }&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># å“åº”</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">data:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {&quot;id&quot;:&quot;chatcmpl-05d06508-81c9-49ed-8969-1065a9e02417&quot;,&quot;object&quot;:&quot;chat.completion.chunk&quot;,&quot;created&quot;:1749617069,&quot;model&quot;:&quot;qwen2-1-5b&quot;,&quot;choices&quot;:[{&quot;index&quot;:0,&quot;delta&quot;:{&quot;role&quot;:&quot;assistant&quot;,&quot;content&quot;:&quot;&quot;},&quot;logprobs&quot;:null,&quot;finish_reason&quot;:null}]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">data:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {&quot;id&quot;:&quot;chatcmpl-05d06508-81c9-49ed-8969-1065a9e02417&quot;,&quot;object&quot;:&quot;chat.completion.chunk&quot;,&quot;created&quot;:1749617069,&quot;model&quot;:&quot;qwen2-1-5b&quot;,&quot;choices&quot;:[{&quot;index&quot;:0,&quot;delta&quot;:{&quot;content&quot;:&quot;I&quot;},&quot;logprobs&quot;:null,&quot;finish_reason&quot;:null}]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">data:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {&quot;id&quot;:&quot;chatcmpl-05d06508-81c9-49ed-8969-1065a9e02417&quot;,&quot;object&quot;:&quot;chat.completion.chunk&quot;,&quot;created&quot;:1749617069,&quot;model&quot;:&quot;qwen2-1-5b&quot;,&quot;choices&quot;:[{&quot;index&quot;:0,&quot;delta&quot;:{&quot;content&quot;:&quot; am&quot;},&quot;logprobs&quot;:null,&quot;finish_reason&quot;:null}]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">......</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">data:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {&quot;id&quot;:&quot;chatcmpl-05d06508-81c9-49ed-8969-1065a9e02417&quot;,&quot;object&quot;:&quot;chat.completion.chunk&quot;,&quot;created&quot;:1749617069,&quot;model&quot;:&quot;qwen2-1-5b&quot;,&quot;choices&quot;:[{&quot;index&quot;:0,&quot;delta&quot;:{&quot;content&quot;:&quot;!&quot;},&quot;logprobs&quot;:null,&quot;finish_reason&quot;:null}]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">data:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {&quot;id&quot;:&quot;chatcmpl-05d06508-81c9-49ed-8969-1065a9e02417&quot;,&quot;object&quot;:&quot;chat.completion.chunk&quot;,&quot;created&quot;:1749617069,&quot;model&quot;:&quot;qwen2-1-5b&quot;,&quot;choices&quot;:[{&quot;index&quot;:0,&quot;delta&quot;:{&quot;content&quot;:&quot;&quot;},&quot;logprobs&quot;:null,&quot;finish_reason&quot;:&quot;stop&quot;,&quot;stop_reason&quot;:null}]}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">data:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {&quot;id&quot;:&quot;chatcmpl-05d06508-81c9-49ed-8969-1065a9e02417&quot;,&quot;object&quot;:&quot;chat.completion.chunk&quot;,&quot;created&quot;:1749617069,&quot;model&quot;:&quot;qwen2-1-5b&quot;,&quot;choices&quot;:[],&quot;usage&quot;:{&quot;prompt_tokens&quot;:33,&quot;total_tokens&quot;:88,&quot;completion_tokens&quot;:55}}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">data:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [DONE]</span></span></code></pre></div><h2 id="å¯è§‚æµ‹æ€§" tabindex="-1">å¯è§‚æµ‹æ€§ <a class="header-anchor" href="#å¯è§‚æµ‹æ€§" aria-label="Permalink to &quot;å¯è§‚æµ‹æ€§&quot;">â€‹</a></h2><p>Higress æä¾›äº†å¯¹å¤§æ¨¡å‹æ¨ç†è¯·æ±‚çš„å¯è§‚æµ‹æ€§æ”¯æŒï¼Œå†…ç½®æŒ‡æ ‡åŒ…æ‹¬ï¼šè¾“å…¥ Token æ•°ã€è¾“å‡º Token æ•°ã€é¦–ä¸ª Token çš„å“åº”æ—¶é—´ï¼ˆé’ˆå¯¹æµå¼è¯·æ±‚ï¼‰ã€è¯·æ±‚æ€»å“åº”æ—¶é—´ç­‰ã€‚</p><p>é»˜è®¤ Higress çš„å¯è§‚æµ‹å¥—ä»¶æ²¡æœ‰å¯ç”¨ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯ç”¨å¯è§‚æµ‹å¥—ä»¶ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> higress</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> higress-system</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> higress.io/higress</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --create-namespace</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --render-subchart-notes</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">--set </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">global.o11y.enabled=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --set</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> global.pvc.rwxSupported=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">false</span></span></code></pre></div><p>ç„¶åå°±å¯ä»¥åœ¨ Higress Console çš„ AI Dashboard é¡µé¢ä¸­çœ‹åˆ°å¤§æ¨¡å‹æ¨ç†è¯·æ±‚çš„æŒ‡æ ‡æ•°æ®äº†ã€‚</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202506111247440.png" alt=""></p><h2 id="fallback-æ¨¡å‹åˆ‡æ¢" tabindex="-1">Fallback æ¨¡å‹åˆ‡æ¢ <a class="header-anchor" href="#fallback-æ¨¡å‹åˆ‡æ¢" aria-label="Permalink to &quot;Fallback æ¨¡å‹åˆ‡æ¢&quot;">â€‹</a></h2><p>Higress AI ç½‘å…³æ”¯æŒ Fallback æ¨¡å‹åˆ‡æ¢ï¼Œå½“è¯·æ±‚çš„æ¨¡å‹æœåŠ¡ä¸å¯ç”¨æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨æ¨¡å‹æœåŠ¡ã€‚åœ¨ <code>qwen2-1-5b</code> æ¨¡å‹çš„ AI Route é…ç½®ä¸­ï¼Œå¯æŒ‡å®šå½“è¿”å› 5xx HTTP é”™è¯¯ç æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢è‡³ <code>gemma-2-2b</code> æ¨¡å‹æœåŠ¡ã€‚åˆ‡æ¢è¿‡ç¨‹ç”¨æˆ·æ˜¯æ— æ„Ÿçš„ï¼ŒåŸæœ¬å¯èƒ½å¤±è´¥çš„è¯·æ±‚åœ¨åˆ‡æ¢åå¯ç”±å¤‡ç”¨æ¨¡å‹æˆåŠŸå¤„ç†å¹¶è¿”å›ç»“æœã€‚</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202506111253315.png" alt=""></p><blockquote><p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨ Kubernetes YAML æ¥é…ç½® Fallback æ¨¡å‹åˆ‡æ¢ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š<a href="https://github.com/cr7258/hands-on-lab/blob/main/gateway/higress/ai-proxy/on-premises/fallback.yaml" target="_blank" rel="noreferrer">https://github.com/cr7258/hands-on-lab/blob/main/gateway/higress/ai-proxy/on-premises/fallback.yaml</a></p></blockquote><p>æ¥ä¸‹æ¥åˆ é™¤ <code>qwen2-1-5b</code> æ¨¡å‹ Podï¼Œæ¨¡æ‹Ÿä¸»æ¨¡å‹æœåŠ¡ä¸å¯ç”¨çš„æƒ…å†µã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pod</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qwen2-1-5b-0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --force</span></span></code></pre></div><p>éšåå†æ¬¡è¯·æ±‚ <code>qwen2-1-5b</code> æ¨¡å‹æœåŠ¡ï¼Œä»å“åº”å†…å®¹å¯ä»¥çœ‹å‡ºè¯·æ±‚å·²æˆåŠŸåˆ‡æ¢è‡³ <code>gemma-2-2b</code> æ¨¡å‹ï¼Œè¯´æ˜ Fallback æœºåˆ¶å·²ç”Ÿæ•ˆã€‚æ•´ä¸ªåˆ‡æ¢è¿‡ç¨‹å¯¹ç”¨æˆ·å®Œå…¨é€æ˜ï¼Œè¯·æ±‚æœªæ„ŸçŸ¥åˆ°ä»»ä½•å¤±è´¥ï¼Œç¡®ä¿äº†æœåŠ¡çš„è¿ç»­æ€§ä¸å¯ç”¨æ€§ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> http://localhost:18000/v1/chat/completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;Content-Type: application/json&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;model&quot;: &quot;qwen2-1-5b&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;messages&quot;: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">            &quot;role&quot;: &quot;user&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">            &quot;content&quot;: &quot;Who are you?&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        ]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      }&#39;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># å“åº”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;choices&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;finish_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;stop&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;index&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;message&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;content&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;I am Gemma, an open-weights AI assistant developed by the Gemma team. I am a large language model, which means I&#39;m trained on a massive amount of text data.  This lets me understand and generate human-like text in response to a wide range of prompts. For example, I can answer your questions, write stories, and have conversations with you. \\n\\nHowever, remember that I&#39;m still under development, so I don&#39;t have access to tools, real-time information, or Google search. I can only tap into what I&#39;ve been trained on.   ğŸ˜Š \\n&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;reasoning_content&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;role&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;assistant&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">            &quot;tool_calls&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">         },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">         &quot;stop_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 107</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">   ],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;created&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1749617726</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;id&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;chatcmpl-5df6f105-6da4-4b49-b06c-ffc3c7c75543&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;model&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;gemma-2-2b&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;object&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;chat.completion&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;prompt_logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   &quot;usage&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;completion_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 125</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;prompt_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;prompt_tokens_details&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;total_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 138</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•å€ŸåŠ© llmaz å¿«é€Ÿéƒ¨ç½²åŸºäº vLLM çš„å¤§è¯­è¨€æ¨¡å‹æ¨ç†æœåŠ¡ï¼Œå¹¶ç»“åˆ Higress AI ç½‘å…³ å®ç°æœåŠ¡ä»£ç†ã€æµé‡è°ƒåº¦ã€å¯è§‚æµ‹æ€§å’Œ Fallback ç­‰å…³é”®èƒ½åŠ›ã€‚</p><h2 id="æ¬¢è¿å…³æ³¨" tabindex="-1">æ¬¢è¿å…³æ³¨ <a class="header-anchor" href="#æ¬¢è¿å…³æ³¨" aria-label="Permalink to &quot;æ¬¢è¿å…³æ³¨&quot;">â€‹</a></h2><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202503222156941.png" alt=""></p>`,69))])}const w=k(u,[["render",D]]);export{f as __pageData,w as default};
