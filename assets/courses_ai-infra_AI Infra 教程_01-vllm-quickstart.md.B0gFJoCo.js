import{_ as p}from"./chunks/ArticleMetadata.BGfgJEkN.js";import{_ as e,C as F,c as r,o as h,k,G as d,P as g,a as y,w as o,b as C,e as D}from"./chunks/framework.hsaHFr3N.js";import"./chunks/md5.Csn9Gkkw.js";const q=JSON.parse('{"title":"vLLM 快速部署指南","description":"","frontmatter":{"title":"vLLM 快速部署指南","author":"Se7en","date":"2025/05/11 23:00","categories":["AI Infra 教程"],"tags":["AI","LLM","Inference","Training"]},"headers":[],"relativePath":"courses/ai-infra/AI Infra 教程/01-vllm-quickstart.md","filePath":"courses/ai-infra/AI Infra 教程/01-vllm-quickstart.md","lastUpdated":1748354653000}'),c={name:"courses/ai-infra/AI Infra 教程/01-vllm-quickstart.md"};function A(i,s,u,B,_,m){const t=p,l=F("ClientOnly");return h(),r("div",null,[s[0]||(s[0]=k("h1",{id:"vllm-快速部署指南",tabindex:"-1"},[y("vLLM 快速部署指南 "),k("a",{class:"header-anchor",href:"#vllm-快速部署指南","aria-label":'Permalink to "vLLM 快速部署指南"'},"​")],-1)),d(l,null,{default:o(()=>{var a,n;return[(((a=i.$frontmatter)==null?void 0:a.aside)??!0)&&(((n=i.$frontmatter)==null?void 0:n.showArticleMetadata)??!0)?(h(),C(t,{key:0,article:i.$frontmatter},null,8,["article"])):D("",!0)]}),_:1}),s[1]||(s[1]=g(`<p>本文是 AI 推理系列的第一篇，近期将更新与 vLLM 的相关内容。本篇从 vLLM 的部署开始，介绍 vLLM GPU/CPU 后端的安装方式，后续将陆续讲解 vLLM 的核心特性，如 PD 分离、Speculative Decoding、Prefix Caching 等，敬请关注。</p><h2 id="_1-什么是-vllm" tabindex="-1">1 什么是 vLLM？ <a class="header-anchor" href="#_1-什么是-vllm" aria-label="Permalink to &quot;1 什么是 vLLM？&quot;">​</a></h2><p>vLLM 是一个高效、易用的大语言模型（LLM）推理和服务框架，专注于优化推理速度和吞吐量，尤其适合高并发的生产环境。它由加州大学伯克利分校的研究团队开发，并因其出色的性能成为当前最受欢迎的 LLM 推理引擎之一。</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202505111828631.png" alt=""></p><p>vLLM 同时支持在 GPU 和 CPU 上运行，本文将会分别介绍 vLLM 使用 GPU 和 CPU 作为后端时的安装与运行方法。</p><h2 id="_2-前提准备" tabindex="-1">2 前提准备 <a class="header-anchor" href="#_2-前提准备" aria-label="Permalink to &quot;2 前提准备&quot;">​</a></h2><h3 id="_2-1-购买虚拟机" tabindex="-1">2.1 购买虚拟机 <a class="header-anchor" href="#_2-1-购买虚拟机" aria-label="Permalink to &quot;2.1 购买虚拟机&quot;">​</a></h3><p>如果本地不具备 GPU 环境，可考虑通过云服务提供商（如阿里云、腾讯云等）购买 GPU 服务器。</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202505092129525.png" alt=""></p><p>操作系统建议选择 Ubuntu 22.04，GPU 型号可根据实际需求进行选择。由于大语言模型通常占用较多磁盘空间，建议适当增加磁盘容量。</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202505092129204.png" alt=""></p><h3 id="_2-2-虚拟环境" tabindex="-1">2.2 虚拟环境 <a class="header-anchor" href="#_2-2-虚拟环境" aria-label="Permalink to &quot;2.2 虚拟环境&quot;">​</a></h3><p>推荐使用 uv 来管理 python 虚拟环境，执行以下命令安装 uv：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -LsSf</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://astral.sh/uv/install.sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> sh</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/.local/bin/env</span></span></code></pre></div><h2 id="_3-安装" tabindex="-1">3 安装 <a class="header-anchor" href="#_3-安装" aria-label="Permalink to &quot;3 安装&quot;">​</a></h2><h3 id="_3-1-使用-gpu-作为-vllm-后端" tabindex="-1">3.1 使用 GPU 作为 vLLM 后端 <a class="header-anchor" href="#_3-1-使用-gpu-作为-vllm-后端" aria-label="Permalink to &quot;3.1 使用 GPU 作为 vLLM 后端&quot;">​</a></h3><h4 id="_3-1-1-系统要求" tabindex="-1">3.1.1 系统要求 <a class="header-anchor" href="#_3-1-1-系统要求" aria-label="Permalink to &quot;3.1.1 系统要求&quot;">​</a></h4><p>vLLM 包含预编译的 C++ 和 CUDA (12.6) 二进制文件，需满足以下条件：</p><ul><li><strong>操作系统</strong>：Linux</li><li><strong>Python 版本</strong>：3.9 ~ 3.12</li><li><strong>GPU</strong>：计算能力 7.0 或更高（如 V100、T4、RTX20xx、A10、A100、L4、H100 等）</li></ul><blockquote><p>注：<a href="https://developer.nvidia.com/cuda-gpus" target="_blank" rel="noreferrer">计算能力（Compute capability）</a>定义了每个 NVIDIA GPU 架构的硬件特性和支持的指令。计算能力决定你是否可以使用某些 CUDA 或 Tensor 核心功能（如 Unified Memory、Tensor Core、动态并行等），并不直接代表 GPU 的计算性能。</p></blockquote><h4 id="_3-1-2-安装和配置-gpu-依赖" tabindex="-1">3.1.2 安装和配置 GPU 依赖 <a class="header-anchor" href="#_3-1-2-安装和配置-gpu-依赖" aria-label="Permalink to &quot;3.1.2 安装和配置 GPU 依赖&quot;">​</a></h4><p>可以使用以下命令一键安装相关依赖，该脚本会安装 NVIDIA GPU Driver，NVIDIA Container Toolkit，以及配置 NVIDIA Container Runtime（后续通过 Docker 运行 vLLM 时需要）。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://raw.githubusercontent.com/cr7258/hands-on-lab/refs/heads/main/ai/gpu/setup/docker-only-install.sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> bash</span></span></code></pre></div><h4 id="_3-1-3-安装-vllm" tabindex="-1">3.1.3 安装 vLLM <a class="header-anchor" href="#_3-1-3-安装-vllm" aria-label="Permalink to &quot;3.1.3 安装 vLLM&quot;">​</a></h4><p>创建 Python 虚拟环境：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># (Recommended) Create a new uv environment. Use \`--seed\` to install \`pip\` and \`setuptools\` in the environment.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">uv</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> venv</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --python</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3.12</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --seed</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> .venv/bin/activate</span></span></code></pre></div><p>安装 vLLM：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">uv</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vllm</span></span></code></pre></div><h3 id="_3-2-使用-cpu-作为-vllm-后端" tabindex="-1">3.2 使用 CPU 作为 vLLM 后端 <a class="header-anchor" href="#_3-2-使用-cpu-作为-vllm-后端" aria-label="Permalink to &quot;3.2 使用 CPU 作为 vLLM 后端&quot;">​</a></h3><h4 id="_3-3-系统要求" tabindex="-1">3.3 系统要求 <a class="header-anchor" href="#_3-3-系统要求" aria-label="Permalink to &quot;3.3 系统要求&quot;">​</a></h4><ul><li><strong>操作系统</strong>：Linux</li><li><strong>Python 版本</strong>：3.9 ~ 3.12</li><li><strong>编译器</strong>： gcc/g++ &gt;= 12.3.0 (可选，建议)</li></ul><h4 id="_3-4-安装编译依赖" tabindex="-1">3.4 安装编译依赖 <a class="header-anchor" href="#_3-4-安装编译依赖" aria-label="Permalink to &quot;3.4 安装编译依赖&quot;">​</a></h4><p>vLLM 当前并没有为 CPU 提供预构建的安装包或者镜像，需要自己根据源码进行编译。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">uv</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> venv</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vllm-cpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --python</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3.12</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --seed</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vllm-cpu/bin/activate</span></span></code></pre></div><p>首先，安装推荐的编译器。建议使用 gcc/g++ &gt;= 12.3.0 作为默认编译器以避免潜在问题。例如，在 Ubuntu 22.4 上，你可以运行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  -y</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gcc-12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> g++-12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libnuma-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> python3-dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> update-alternatives</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /usr/bin/gcc</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gcc</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /usr/bin/gcc-12</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /usr/bin/g++</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> g++</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /usr/bin/g++-12</span></span></code></pre></div><p>然后克隆 vLLM 仓库：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://github.com/vllm-project/vllm.git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vllm_source</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vllm_source</span></span></code></pre></div><p>接着，安装用于构建 vLLM CPU 后端的 Python 包：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --upgrade</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;cmake&gt;=3.26&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> wheel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> packaging</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ninja</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;setuptools-scm&gt;=8&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> numpy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -v</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> requirements/cpu.txt</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --extra-index-url</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://download.pytorch.org/whl/cpu</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> intel-extension-for-pytorch</span></span></code></pre></div><h4 id="_3-5-安装-vllm" tabindex="-1">3.5 安装 vLLM <a class="header-anchor" href="#_3-5-安装-vllm" aria-label="Permalink to &quot;3.5 安装 vLLM&quot;">​</a></h4><p>最后，构建并安装 vLLM CPU 后端：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">VLLM_TARGET_DEVICE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">cpu</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> python</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> setup.py</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span></span></code></pre></div><h3 id="_3-3-使用-docker-运行-vllm" tabindex="-1">3.3 使用 Docker 运行 vLLM <a class="header-anchor" href="#_3-3-使用-docker-运行-vllm" aria-label="Permalink to &quot;3.3 使用 Docker 运行 vLLM&quot;">​</a></h3><p>vLLM 官方提供了 Docker 镜像用于部署。执行以下命令使用 Docker 来运行 GPU 后端的 vLLM：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --runtime</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> nvidia</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --gpus</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> all</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    -v</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/.cache/huggingface:/root/.cache/huggingface</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 8000</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:8000</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    --ipc=host</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    vllm/vllm-openai:latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    --model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Qwen/Qwen2.5-1.5B-Instruct</span></span></code></pre></div><p>以下是命令参数的解释：</p><ul><li><code>--runtime nvidia</code>: 指定使用 NVIDIA 容器运行时，这是运行需要 GPU 的容器的必要设置。</li><li><code>--gpus all</code>: 允许容器访问主机上的所有 GPU 资源。如果你只想使用特定的 GPU，可以指定 GPU ID，例如使用 <code>--gpus &#39;&quot;device=0,1&quot;&#39;</code> 指定使用 0 和 1 号 GPU（注意：<code>device</code> 前后还有个单引号，否则会看到这个报错：<code>cannot set both Count and DeviceIDs on device request.</code>）。如果想直接设置指定数量的 GPU，例如可以使用 <code>--gpus 2</code>，使用 2 个 GPU。</li><li><code>-v ~/.cache/huggingface:/root/.cache/huggingface</code>: 将主机上的 Hugging Face 缓存目录挂载到容器内。这样可以在容器重启后重用已下载的模型，避免重复下载，节省时间和网络流量。</li><li><code>-p 8000:8000</code>: 将容器内的 8000 端口映射到主机的 8000 端口，使得可以通过 <code>http://localhost:8000</code> 访问 vLLM 服务。</li><li>你可以使用 <code>ipc=host</code> 标志或 <code>--shm-size</code> 标志，让容器访问宿主机的共享内存。vLLM 使用 PyTorch，而 PyTorch 在底层通过共享内存在进程之间传递数据，尤其是在进行张量并行推理时。在使用多个 GPU 进行推理时需要设置该参数。</li><li><code>vllm/vllm-openai:latest</code>: 使用的 Docker 镜像，<code>latest</code> 表示最新版本的 vLLM OpenAI 兼容服务器镜像。</li><li><code>--model Qwen/Qwen2.5-1.5B-Instruct</code>: 传递给 vLLM 服务的参数，指定要加载的模型为 <code>Qwen/Qwen2.5-1.5B-Instruct</code>。</li></ul><p>如果要使用 CPU 作为后端来运行 vLLM 可以使用这个<a href="https://gallery.ecr.aws/q9t5s3a7/vllm-cpu-release-repo" target="_blank" rel="noreferrer">仓库</a>的镜像。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/.cache/huggingface:/root/.cache/huggingface</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 8000</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:8000</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  --ipc=host</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  public.ecr.aws/q9t5s3a7/vllm-cpu-release-repo:v0.8.5</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  --model=Qwen/Qwen2.5-1.5B-Instruct</span></span></code></pre></div><p>vLLM 提供了两种主要的推理模式：离线推理（Offline Inference）和在线推理（Online Serving），适用于不同的应用场景和需求。这两种模式的区别如下：</p><h2 id="_4-离线推理和在线推理的区别" tabindex="-1">4 离线推理和在线推理的区别 <a class="header-anchor" href="#_4-离线推理和在线推理的区别" aria-label="Permalink to &quot;4 离线推理和在线推理的区别&quot;">​</a></h2><p>离线推理（offline inference）和在线推理（online inference）的主要区别在于<strong>使用场景、延迟要求、资源调度方式</strong>等方面，简单总结如下：</p><h3 id="_4-1-离线推理" tabindex="-1">4.1 离线推理 <a class="header-anchor" href="#_4-1-离线推理" aria-label="Permalink to &quot;4.1 离线推理&quot;">​</a></h3><p><strong>定义：</strong> 对一批输入数据进行集中处理，通常不要求实时返回结果。特点如下：</p><ul><li><strong>批处理</strong>：常用于处理大量输入，如日志分析、推荐系统预计算。</li><li><strong>低延迟要求</strong>：结果可以晚些返回，不影响用户体验。</li><li><strong>资源利用高</strong>：系统可以在空闲时充分利用 GPU/CPU 资源。</li><li><strong>示例场景</strong>：每天夜间跑用户兴趣画像、预生成广告文案等。</li></ul><h3 id="_4-2-在线推理" tabindex="-1">4.2 在线推理 <a class="header-anchor" href="#_4-2-在线推理" aria-label="Permalink to &quot;4.2 在线推理&quot;">​</a></h3><p><strong>定义：</strong> 针对用户实时请求进行推理，立即返回结果。特点如下：</p><ul><li><strong>实时响应</strong>：响应时间通常要求在几百毫秒以内。</li><li><strong>延迟敏感</strong>：高并发、低延迟是核心指标。</li><li><strong>资源分配稳定</strong>：服务需长时间在线、资源预留固定。</li><li><strong>示例场景</strong>：聊天机器人、搜索联想、智能客服等。</li></ul><h2 id="_5-离线推理" tabindex="-1">5 离线推理 <a class="header-anchor" href="#_5-离线推理" aria-label="Permalink to &quot;5 离线推理&quot;">​</a></h2><p>安装好 vLLM 后，你可以开始对一系列输入提示词进行文本生成（即离线批量推理）。以下代码是 vLLM 官网提供的示例：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># basic.py</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># https://github.com/vllm-project/vllm/blob/main/examples/offline_inference/basic/basic.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> vllm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> LLM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, SamplingParams</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Sample prompts.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">prompts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    &quot;Hello, my name is&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    &quot;The president of the United States is&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    &quot;The capital of France is&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    &quot;The future of AI is&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Create a sampling params object.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">sampling_params </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> SamplingParams(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">top_p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.95</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">():</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    # Create an LLM.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    llm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> LLM(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;facebook/opt-125m&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    # Generate texts from the prompts.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    # The output is a list of RequestOutput objects</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    # that contain the prompt, generated text, and other information.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    outputs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> llm.generate(prompts, sampling_params)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    # Print the outputs.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Generated Outputs:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;-&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> output </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> outputs:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> output.prompt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        generated_text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> output.outputs[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">].text</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Prompt:    </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">prompt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!r</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Output:    </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">generated_text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!r</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;-&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;__main__&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    main()</span></span></code></pre></div><p>在上面的代码中，使用了 <code>SamplingParams</code> 来指定采样过程的参数。采样温度设置为 0.8，核采样概率设置为 0.95。下面解释一下这两个参数的用途：</p><p>Sampling Temperature（采样温度） 和 Nucleus Sampling Probability（核采样概率/Top-p） 是大语言模型生成文本时常用的两个采样参数，用于控制输出文本的多样性和质量。</p><ul><li><p><strong>采样温度（Sampling Temperature）</strong></p><ul><li>作用：控制生成文本的“随机性”或“创造性”。</li><li>原理：温度会对模型输出的概率分布进行缩放。温度越低（如0.5），高概率的词更容易被选中，生成结果更确定、重复性更高；温度越高（如1.2），低概率的词被选中的机会增加，文本更有多样性但可能更混乱。</li><li>具体来说，temperature=0.8 表示在概率分布上做了一定程度的“平滑”，比默认的 1.0 更偏向于选择高概率词，但仍保留一定的多样性。</li></ul></li><li><p><strong>核采样概率（Nucleus Sampling Probability / Top-p）</strong></p><ul><li>作用：控制每一步生成时考虑的候选词集合大小，动态平衡文本的多样性和合理性。</li><li>原理：Top-p（核采样）会将所有词按概率从高到低排序，累加概率，直到总和首次超过 0.95 为止，只在这部分“核心”词中随机采样。</li></ul></li></ul><p>这里用一个例子来解释这两个采样参数之间的关系，假设模型下一步可以说 “猫 狗 老虎 大象 猴子 乌龟 老鹰 鳄鱼 蚂蚁 ...”（有上万个词）：</p><ul><li><code>Temperature</code> 是调整每个词出现的概率（“猫”的概率是 30%，你可以把它调得更大或更小）；</li><li><code>Top-p</code> 是把所有词排序后，只保留累计概率达到 95% 的前几个词，比如前 7 个，然后从中挑一个。</li></ul><p>输出是通过 <code>llm.generate</code> 方法生成的。该方法会将输入提示加入 vLLM 引擎的等待队列，并调用 vLLM 引擎以高吞吐量生成输出。最终输出会以 <code>RequestOutput</code> 对象列表的形式返回，每个对象包含完整的输出 token。</p><p>执行以下代码运行程序：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> basic.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 输出</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:19:49</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [__init__.py:239] Automatically detected platform cuda.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:08</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:717] This model supports multiple tasks: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;embed&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;classify&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;reward&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;score&#39;}.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Defaulting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:13</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:2003] Chunked prefill is enabled with max_num_batched_tokens=8192.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">tokenizer_config.json:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 685/685</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6.99</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">vocab.json:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 899k/899k</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1.90</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">merges.txt:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 456k/456k</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">13.1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">special_tokens_map.json:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 441/441</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5.21</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">generation_config.json:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 137/137</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1.70</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:18</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [core.py:58] Initializing a V1 LLM engine (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">v0.8.5.post1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) with config: model=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;facebook/opt-125m&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, speculative_config=None, tokenizer=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;facebook/opt-125m&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, skip_tokenizer_init=False, tokenizer_mode=auto, revision=None, override_neuron_config=None, tokenizer_revision=None, trust_remote_code=False, dtype=torch.float16, max_seq_len=2048, download_dir=None, load_format=LoadFormat.AUTO, tensor_parallel_size=1, pipeline_parallel_size=1, disable_custom_all_reduce=False, quantization=None, enforce_eager=False, kv_cache_dtype=auto,  device_config=cuda, decoding_config=DecodingConfig(guided_decoding_backend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;auto&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> reasoning_backend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> observability_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ObservabilityConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(show_hidden_metrics</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> otlp_traces_endpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> collect_model_forward_time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> collect_model_execute_time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> served_model_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">facebook/opt-125m,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> num_scheduler_steps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> multi_step_stream_outputs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> enable_prefix_caching</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> chunked_prefill_enabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> use_async_output_proc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> disable_mm_preprocessor_cache</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> mm_processor_kwargs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> pooler_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> compilation_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{&quot;level&quot;:3,&quot;custom_ops&quot;:[&quot;none&quot;],&quot;splitting_ops&quot;:[&quot;vllm.unified_attention&quot;,&quot;vllm.unified_attention_with_output&quot;],&quot;use_inductor&quot;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,&quot;compile_sizes&quot;:[],&quot;use_cudagraph&quot;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,&quot;cudagraph_num_of_warmups&quot;:1,&quot;cudagraph_capture_sizes&quot;:[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">512</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,504,496,488,480,472,464,456,448,440,432,424,416,408,400,392,384,376,368,360,352,344,336,328,320,312,304,296,288,280,272,264,256,248,240,232,224,216,208,200,192,184,176,168,160,152,144,136,128,120,112,104,96,88,80,72,64,56,48,40,32,24,16,8,4,2,1],&quot;max_capture_size&quot;:512}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:19</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [utils.py:2522] Methods determine_num_available_blocks,device_config,get_cache_block_size_bytes,initialize_cache not implemented </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">vllm.v1.worker.gpu_worker.Worker object at 0x78d0197039e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">0&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:21</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [parallel_state.py:1004] rank 0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> world size 1 is assigned as DP rank 0, PP rank 0, TP rank 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:21</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [cuda.py:221] Using Flash Attention backend on V1 engine.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:21</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [topk_topp_sampler.py:69] FlashInfer is not available. Falling back to the PyTorch-native implementation of top-p &amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">top-k</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sampling.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> For</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> best</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> performance,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> please</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> FlashInfer.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:21</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [gpu_model_runner.py:1329] Starting to load model facebook/opt-125m...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:22</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [weight_utils.py:265] Using model weights format [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;*.bin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pytorch_model.bin:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 251M/251M</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:27&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8.96</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:51</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [weight_utils.py:281] Time spent downloading weights </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> facebook/opt-125m: 28.962338 seconds</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 0/1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;?, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">?it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 1/1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5.84</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 1/1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5.83</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">it/s]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:51</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [loader.py:458] Loading weights took 0.17 seconds</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:51</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [gpu_model_runner.py:1347] Model loading took 0.2389 GiB and 29.934842 seconds</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:20:53</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [backends.py:420] Using cache directory: /root/.cache/vllm/torch_compile_cache/4f59edd943/rank_0_0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> vLLM</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;s torch.compile</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:20:53 [backends.py:430] Dynamo bytecode transform time: 2.05 s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:20:55 [backends.py:136] Cache the graph of shape None for later use</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:20:59 [backends.py:148] Compiling a graph for general shape takes 6.06 s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:21:02 [monitor.py:33] torch.compile takes 8.11 s in total</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:21:02 [kv_cache_utils.py:634] GPU KV cache size: 549,216 tokens</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:21:02 [kv_cache_utils.py:637] Maximum concurrency for 2,048 tokens per request: 268.17x</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:21:17 [gpu_model_runner.py:1686] Graph capturing finished in 15 secs, took 0.20 GiB</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:21:17 [core.py:159] init engine (profile, create kv cache, warmup model) took 26.22 seconds</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:21:17 [core_client.py:439] Core engine process 0 ready.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Processed prompts: 100%|████████████████████████████████████████████████████████████████████████████████████████████| 4/4 [00:00&lt;00:00, 32.86it/s, est. speed input: 213.68 toks/s, output: 525.96 toks/s]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Generated Outputs:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Prompt:    &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Hello, my name is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Output:    &quot; Paul D. I&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">m 28 years old. I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;m a girl, but I&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Prompt:    &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">The president of the United States is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Output:    &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> facing the same problems as a former CIA director, who has been accused of repeatedly</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Prompt:    &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">The capital of France is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Output:    &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> exploding with touristy people.</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\n</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">What </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">do</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mean?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  Did</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mean&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Prompt:    &#39;The</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> future</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> AI</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Output:    &#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> big</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shift</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> near</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> term.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> The</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> world</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> hands&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">------------------------------------------------------------</span></span></code></pre></div><p>默认情况下，vLLM 会从 <a href="https://huggingface.co/" target="_blank" rel="noreferrer">Hugging Face</a> 下载模型。如果你想使用来自 <a href="https://www.modelscope.cn/" target="_blank" rel="noreferrer">ModelScope</a> 的模型，请设置 <code>VLLM_USE_MODELSCOPE</code> 环境变量。</p><h2 id="_6-在线推理" tabindex="-1">6 在线推理 <a class="header-anchor" href="#_6-在线推理" aria-label="Permalink to &quot;6 在线推理&quot;">​</a></h2><p>vLLM 可以部署为实现 OpenAI API 协议的服务器。默认情况下，服务器在 <code>http://localhost:8000</code> 启动。你可以通过 <code>--host</code> 和 <code>--port</code> 参数指定地址。服务器目前一次只能托管一个模型，实现了 <a href="https://platform.openai.com/docs/api-reference/models/list" target="_blank" rel="noreferrer">list models</a>，<a href="https://platform.openai.com/docs/api-reference/chat/completions/create" target="_blank" rel="noreferrer">create chat completion</a> 等端点。</p><p>运行以下命令以启动 vLLM 服务器，并使用 <code>Qwen/Qwen2.5-1.5B-Instruct</code> 模型：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">vllm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> serve</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Qwen/Qwen2.5-1.5B-Instruct</span></span></code></pre></div><p>启动后的输出如下（GPU 后端）：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:11</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [__init__.py:239] Automatically detected platform cuda.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:18</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [api_server.py:1043] vLLM API server version 0.8.5.post1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:18</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [api_server.py:1044] args: Namespace(subparser</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;serve&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> model_tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Qwen/Qwen2.5-1.5B-Instruct&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> host</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> port</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8000</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> uvicorn_log_level</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;info&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> disable_uvicorn_access_log</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> allow_credentials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> allowed_origins</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">[&#39;*&#39;],</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> allowed_methods</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">[&#39;*&#39;],</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> allowed_headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">[&#39;*&#39;],</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> lora_modules</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> prompt_adapters</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> chat_template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> chat_template_content_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;auto&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> response_role</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;assistant&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ssl_keyfile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ssl_certfile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ssl_ca_certs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> enable_ssl_refresh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ssl_cert_reqs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> root_path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> middleware</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">[],</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> return_tokens_as_token_ids</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> disable_frontend_multiprocessing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> enable_request_id_headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> enable_auto_tool_choice</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tool_call_parser</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tool_parser_plugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Qwen/Qwen2.5-1.5B-Instruct&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> task</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;auto&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tokenizer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hf_config_path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> skip_tokenizer_init</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> revision</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> code_revision</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tokenizer_revision</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tokenizer_mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;auto&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> trust_remote_code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> allowed_local_media_path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> load_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;auto&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> download_dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> model_loader_extra_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{},</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> use_tqdm_on_load</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> config_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ConfigFormat.AUTO:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> &#39;auto&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&gt;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dtype=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_model_len=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> guided_decoding_backend=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reasoning_parser=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> logits_processor_pattern=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model_impl=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> distributed_executor_backend=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pipeline_parallel_size=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tensor_parallel_size=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> data_parallel_size=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_expert_parallel=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_parallel_loading_workers=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ray_workers_use_nsight=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_custom_all_reduce=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> block_size=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gpu_memory_utilization=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.9</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> swap_space=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kv_cache_dtype=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> num_gpu_blocks_override=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_prefix_caching=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> prefix_caching_hash_algo=&#39;builtin&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cpu_offload_gb=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> calculate_kv_scales=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_sliding_window=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> use_v2_block_manager=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> seed=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_logprobs=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_log_stats=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> quantization=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rope_scaling=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rope_theta=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> hf_token=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> hf_overrides=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enforce_eager=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_seq_len_to_capture=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8192</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tokenizer_pool_size=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tokenizer_pool_type=&#39;ray&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tokenizer_pool_extra_config={},</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> limit_mm_per_prompt={},</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mm_processor_kwargs=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_mm_preprocessor_cache=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_lora=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_lora_bias=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_loras=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_lora_rank=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">16</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lora_extra_vocab_size=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">256</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lora_dtype=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> long_lora_scaling_factors=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_cpu_loras=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> fully_sharded_loras=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_prompt_adapter=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_prompt_adapters=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_prompt_adapter_token=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> device=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> speculative_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ignore_patterns=[],</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> served_model_name=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qlora_adapter_name_or_path=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> show_hidden_metrics_for_version=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> otlp_traces_endpoint=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> collect_detailed_traces=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_async_output_proc=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_num_batched_tokens=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_num_seqs=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_num_partial_prefills=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_long_partial_prefills=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> long_prefill_token_threshold=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> num_lookahead_slots=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> scheduler_delay_factor=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> preemption_mode=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> num_scheduler_steps=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> multi_step_stream_outputs=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> scheduling_policy=&#39;fcfs&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_chunked_prefill=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_chunked_mm_input=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> scheduler_cls=&#39;vllm.core.scheduler.Scheduler&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> override_neuron_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> override_pooler_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> compilation_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kv_transfer_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> worker_cls=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> worker_extension_cls=&#39;&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> generation_config=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> override_generation_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_sleep_mode=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> additional_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_reasoning=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_cascade_attn=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_log_requests=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_log_len=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_fastapi_docs=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_prompt_tokens_details=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_server_load_tracking=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dispatch_function=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">function</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ServeSubcommand.cmd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> at</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0x7e5c1f36b74</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">0&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">config.json:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 660/660</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6.78</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:33</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:717] This model supports multiple tasks: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;reward&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;classify&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;score&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;embed&#39;}.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Defaulting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:38</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:2003] Chunked prefill is enabled with max_num_batched_tokens=2048.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">tokenizer_config.json:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 7.30k/7.30k</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6.34</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">vocab.json:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 2.78M/2.78M</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3.32</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">merges.txt:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 1.67M/1.67M</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2.64</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">tokenizer.json:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 7.03M/7.03M</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8.10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">generation_config.json:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 242/242</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2.76</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:51</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [__init__.py:239] Automatically detected platform cuda.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:56</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [core.py:58] Initializing a V1 LLM engine (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">v0.8.5.post1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) with config: model=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Qwen/Qwen2.5-1.5B-Instruct&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, speculative_config=None, tokenizer=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Qwen/Qwen2.5-1.5B-Instruct&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, skip_tokenizer_init=False, tokenizer_mode=auto, revision=None, override_neuron_config=None, tokenizer_revision=None, trust_remote_code=False, dtype=torch.bfloat16, max_seq_len=32768, download_dir=None, load_format=LoadFormat.AUTO, tensor_parallel_size=1, pipeline_parallel_size=1, disable_custom_all_reduce=False, quantization=None, enforce_eager=False, kv_cache_dtype=auto,  device_config=cuda, decoding_config=DecodingConfig(guided_decoding_backend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;auto&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> reasoning_backend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> observability_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ObservabilityConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(show_hidden_metrics</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> otlp_traces_endpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> collect_model_forward_time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> collect_model_execute_time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> served_model_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Qwen/Qwen2.5-1.5B-Instruct,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> num_scheduler_steps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> multi_step_stream_outputs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> enable_prefix_caching</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> chunked_prefill_enabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> use_async_output_proc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> disable_mm_preprocessor_cache</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> mm_processor_kwargs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> pooler_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> compilation_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{&quot;level&quot;:3,&quot;custom_ops&quot;:[&quot;none&quot;],&quot;splitting_ops&quot;:[&quot;vllm.unified_attention&quot;,&quot;vllm.unified_attention_with_output&quot;],&quot;use_inductor&quot;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,&quot;compile_sizes&quot;:[],&quot;use_cudagraph&quot;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,&quot;cudagraph_num_of_warmups&quot;:1,&quot;cudagraph_capture_sizes&quot;:[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">512</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,504,496,488,480,472,464,456,448,440,432,424,416,408,400,392,384,376,368,360,352,344,336,328,320,312,304,296,288,280,272,264,256,248,240,232,224,216,208,200,192,184,176,168,160,152,144,136,128,120,112,104,96,88,80,72,64,56,48,40,32,24,16,8,4,2,1],&quot;max_capture_size&quot;:512}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:57</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [utils.py:2522] Methods determine_num_available_blocks,device_config,get_cache_block_size_bytes,initialize_cache not implemented </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">vllm.v1.worker.gpu_worker.Worker object at 0x78bea674d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">970&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:58</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [parallel_state.py:1004] rank 0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> world size 1 is assigned as DP rank 0, PP rank 0, TP rank 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:58</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [cuda.py:221] Using Flash Attention backend on V1 engine.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:58</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [topk_topp_sampler.py:69] FlashInfer is not available. Falling back to the PyTorch-native implementation of top-p &amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">top-k</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sampling.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> For</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> best</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> performance,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> please</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> FlashInfer.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:58</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [gpu_model_runner.py:1329] Starting to load model Qwen/Qwen2.5-1.5B-Instruct...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:59</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [weight_utils.py:265] Using model weights format [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;*.safetensors&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">model.safetensors:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 3.09G/3.09G</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [03:44&lt;00:00, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">13.8</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MB/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:44</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [weight_utils.py:281] Time spent downloading weights </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Qwen/Qwen2.5-1.5B-Instruct: 225.167288 seconds</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:45</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [weight_utils.py:315] No model.safetensors.index.json found </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> remote.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 0/1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;?, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">?it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 1/1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2.23</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 1/1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2.23</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">it/s]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:45</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [loader.py:458] Loading weights took 0.50 seconds</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:45</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [gpu_model_runner.py:1347] Model loading took 2.8871 GiB and 226.791553 seconds</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:52</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [backends.py:420] Using cache directory: /root/.cache/vllm/torch_compile_cache/c822c41d5a/rank_0_0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> vLLM</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;s torch.compile</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:55:52 [backends.py:430] Dynamo bytecode transform time: 6.61 s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:55:54 [backends.py:136] Cache the graph of shape None for later use</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:56:17 [backends.py:148] Compiling a graph for general shape takes 24.18 s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:56:26 [monitor.py:33] torch.compile takes 30.79 s in total</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:56:27 [kv_cache_utils.py:634] GPU KV cache size: 567,984 tokens</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:56:27 [kv_cache_utils.py:637] Maximum concurrency for 32,768 tokens per request: 17.33x</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:56:47 [gpu_model_runner.py:1686] Graph capturing finished in 21 secs, took 0.45 GiB</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:56:47 [core.py:159] init engine (profile, create kv cache, warmup model) took 62.02 seconds</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-09 22:56:47 [core_client.py:439] Core engine process 0 ready.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">WARNING 05-09 22:56:48 [config.py:1239] Default sampling parameters have been overridden by the model&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">s Hugging Face generation config recommended from the model creator. If this is not intended, please relaunch vLLM instance with </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">--generation-config</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vllm\`</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [serving_chat.py:118] Using default chat sampling params from model: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;repetition_penalty&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;temperature&#39;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.7</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;top_k&#39;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 20</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;top_p&#39;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.8</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [serving_completion.py:61] Using default completion sampling params from model: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;repetition_penalty&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;temperature&#39;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.7</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;top_k&#39;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 20</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;top_p&#39;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.8</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [api_server.py:1090] Starting vLLM API server on http://0.0.0.0:8000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:28] Available routes are:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /openapi.json, Methods: HEAD, GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /docs, Methods: HEAD, GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /docs/oauth2-redirect, Methods: HEAD, GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /redoc, Methods: HEAD, GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /health, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /load, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /ping, Methods: POST, GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /tokenize, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /detokenize, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /v1/models, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /version, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /v1/chat/completions, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /v1/completions, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /v1/embeddings, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /pooling, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /score, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /v1/score, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /v1/audio/transcriptions, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /rerank, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /v1/rerank, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /v2/rerank, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /invocations, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-09</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:36] Route: /metrics, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     Started</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [49305]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     Waiting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> application</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> startup.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     Application</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> startup</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> complete.</span></span></code></pre></div><p>启动后的输出如下（CPU 后端）：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:14</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [__init__.py:248] Automatically detected platform cpu.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:27</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:760] This model supports multiple tasks: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;classify&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;embed&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;score&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;reward&#39;}.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Defaulting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:27</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:1857] Disabled the custom all-reduce kernel because it is not supported on current platform.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:27</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:2019] max_model_len was is not set. Defaulting to arbitrary value of 8192.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:27</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:2025] max_num_seqs was is not set. Defaulting to arbitrary value of 128.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:29</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:760] This model supports multiple tasks: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;classify&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;embed&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;score&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;reward&#39;}.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Defaulting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:29</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:1857] Disabled the custom all-reduce kernel because it is not supported on current platform.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:30</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:760] This model supports multiple tasks: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;classify&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;embed&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;score&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;reward&#39;}.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Defaulting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:30</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:1857] Disabled the custom all-reduce kernel because it is not supported on current platform.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:31</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:760] This model supports multiple tasks: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;classify&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;embed&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;score&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;reward&#39;}.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Defaulting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:31</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:1857] Disabled the custom all-reduce kernel because it is not supported on current platform.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:31</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [api_server.py:1044] vLLM API server version 0.8.5.dev572+g246e3e0a3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:32</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:760] This model supports multiple tasks: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;classify&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;embed&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;score&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;reward&#39;}.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Defaulting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:32</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:1857] Disabled the custom all-reduce kernel because it is not supported on current platform.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:32</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [cli_args.py:297] non-default args: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;model&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;Qwen/Qwen2.5-1.5B-Instruct&#39;}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:41</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:760] This model supports multiple tasks: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;classify&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;embed&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;score&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;reward&#39;}.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Defaulting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:41</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [arg_utils.py:1533] device type=cpu is not supported by the V1 Engine. Falling back to V0. </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:41</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:1857] Disabled the custom all-reduce kernel because it is not supported on current platform.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:41</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [cpu.py:118] Environment variable VLLM_CPU_KVCACHE_SPACE (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">GiB</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> CPU backend is not set, using 4 by default.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:41</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [cpu.py:131] uni is not supported on CPU, fallback to mp distributed executor backend.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:41</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [api_server.py:247] Started engine process with PID 23528</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:45</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [__init__.py:248] Automatically detected platform cpu.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:47</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [llm_engine.py:240] Initializing a V0 LLM engine (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">v0.8.5.dev572+g246e3e0a3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) with config: model=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Qwen/Qwen2.5-1.5B-Instruct&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, speculative_config=None, tokenizer=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Qwen/Qwen2.5-1.5B-Instruct&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, skip_tokenizer_init=False, tokenizer_mode=auto, revision=None, override_neuron_config={}, tokenizer_revision=None, trust_remote_code=False, dtype=torch.bfloat16, max_seq_len=32768, download_dir=None, load_format=LoadFormat.AUTO, tensor_parallel_size=1, pipeline_parallel_size=1, disable_custom_all_reduce=True, quantization=None, enforce_eager=True, kv_cache_dtype=auto,  device_config=cpu, decoding_config=DecodingConfig(backend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;auto&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> disable_fallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> disable_any_whitespace</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> disable_additional_properties</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> reasoning_backend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> observability_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ObservabilityConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(show_hidden_metrics_for_version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> otlp_traces_endpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> collect_detailed_traces</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> served_model_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Qwen/Qwen2.5-1.5B-Instruct,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> num_scheduler_steps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> multi_step_stream_outputs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> enable_prefix_caching</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> chunked_prefill_enabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> use_async_output_proc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> pooler_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> compilation_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{&quot;compile_sizes&quot;:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;inductor_compile_config&quot;:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {&quot;enable_auto_functionalized_v2&quot;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> false</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">},</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;cudagraph_capture_sizes&quot;:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [256, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">248</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 240</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 232</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 224</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 216</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 208</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 192</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 184</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 176</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 168</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 160</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 152</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 144</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 136</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 128</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 120</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 112</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 104</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 96</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 88</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 80</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 72</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 64</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 56</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 48</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 40</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 32</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 24</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 16</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 8</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">],</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;max_capture_size&quot;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 256</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">},</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> use_cached_outputs=True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:49</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [cpu.py:57] Using Torch SDPA backend.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:49</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [parallel_state.py:1004] rank 0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> world size 1 is assigned as DP rank 0, PP rank 0, TP rank 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:49</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [weight_utils.py:257] Using model weights format [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;*.safetensors&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:50</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [weight_utils.py:307] No model.safetensors.index.json found </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> remote.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 0/1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;?, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">?it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 1/1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6.57</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 1/1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:00,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6.56</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">it/s]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:50</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [default_loader.py:278] Loading weights took 0.19 seconds</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:50</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [executor_base.py:112] </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># cpu blocks: 9362, # CPU blocks: 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:50</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [executor_base.py:117] Maximum concurrency </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> 32768 tokens per request: 4.57x</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:50</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [llm_engine.py:435] init engine (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">profile,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kv</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cache,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> warmup</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) took 0.15 seconds</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:48:51</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:1283] Default sampling parameters have been overridden by the model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;s Hugging Face generation config recommended from the model creator. If this is not intended, please relaunch vLLM instance with \`--generation-config vllm\`.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [serving_chat.py:116] Using default chat sampling params from model: {&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">repetition_penalty</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;: 1.1, &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">temperature</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;: 0.7, &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">top_k</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;: 20, &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">top_p</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;: 0.8}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [serving_completion.py:61] Using default completion sampling params from model: {&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">repetition_penalty</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;: 1.1, &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">temperature</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;: 0.7, &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">top_k</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;: 20, &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">top_p</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;: 0.8}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [api_server.py:1091] Starting vLLM API server on http://0.0.0.0:8000</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:28] Available routes are:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /openapi.json, Methods: GET, HEAD</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /docs, Methods: GET, HEAD</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /docs/oauth2-redirect, Methods: GET, HEAD</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /redoc, Methods: GET, HEAD</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /health, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /load, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /ping, Methods: GET, POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /tokenize, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /detokenize, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /v1/models, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /version, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /v1/chat/completions, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /v1/completions, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /v1/embeddings, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /pooling, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /score, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /v1/score, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /v1/audio/transcriptions, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /rerank, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /v1/rerank, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /v2/rerank, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /invocations, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 05-10 11:48:51 [launcher.py:36] Route: /metrics, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO:     Started server process [23290]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO:     Waiting for application startup.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO:     Application startup complete.</span></span></code></pre></div><p>这个服务器可以像 OpenAI API 一样以相同的格式进行请求。例如，要列出模型：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> http://localhost:8000/v1/models</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> jq</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 输出</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;object&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;list&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;data&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;id&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;Qwen/Qwen2.5-1.5B-Instruct&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;object&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;model&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;created&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1746802639</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;owned_by&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;vllm&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;root&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;Qwen/Qwen2.5-1.5B-Instruct&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;parent&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;max_model_len&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 32768</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;permission&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;id&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;modelperm-63355d89a63946e58de0095fa60cd62b&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;object&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;model_permission&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;created&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1746802639</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;allow_create_engine&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> false</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;allow_sampling&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;allow_logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;allow_search_indices&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> false</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;allow_view&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;allow_fine_tuning&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> false</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;organization&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;*&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;group&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">          &quot;is_blocking&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h3 id="_6-1-使用-vllm-的-openai-completions-api" tabindex="-1">6.1 使用 vLLM 的 OpenAI Completions API <a class="header-anchor" href="#_6-1-使用-vllm-的-openai-completions-api" aria-label="Permalink to &quot;6.1 使用 vLLM 的 OpenAI Completions API&quot;">​</a></h3><p>你可以使用输入提示词查询模型：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> http://localhost:8000/v1/completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    -H</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    -d</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;model&quot;: &quot;Qwen/Qwen2.5-1.5B-Instruct&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;prompt&quot;: &quot;San Francisco is a&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    }&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> jq</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 输出</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;id&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;cmpl-8bca6ac3579a41178ae70c6c5ba1d6c6&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;object&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;text_completion&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;created&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1746802658</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;model&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;Qwen/Qwen2.5-1.5B-Instruct&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;choices&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;index&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;text&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot; city in the state of California, United States. It is the county seat of&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;finish_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;length&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;stop_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;prompt_logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;usage&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;prompt_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;total_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 20</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;completion_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 16</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;prompt_tokens_details&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>由于服务器与 OpenAI API 兼容，你也可以直接使用 openai 的 Python SDK 进行请求。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> OpenAI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Modify OpenAI&#39;s API key and API base to use vLLM&#39;s API server.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">openai_api_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;EMPTY&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">openai_api_base </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;http://localhost:8000/v1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">client </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> OpenAI(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">openai_api_key,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    base_url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">openai_api_base,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">completion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> client.completions.create(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Qwen/Qwen2.5-1.5B-Instruct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">                                      prompt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;San Francisco is a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Completion result:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, completion)</span></span></code></pre></div><p>执行以上代码的输出如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Completion</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> result:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;cmpl-4b2b13ce66c24de3afc73ee67dc94607&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">choices</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">[CompletionChoice</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(finish_reason</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;length&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> logprobs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; city of contrasts. It has its share of luxury and wealth, but it also&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">stop_reason</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> prompt_logprobs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">],</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> created</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1746802708</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Qwen/Qwen2.5-1.5B-Instruct&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;text_completion&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> system_fingerprint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">usage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">CompletionUsage</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(completion_tokens</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">16</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> prompt_tokens</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> total_tokens</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">completion_tokens_details</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> prompt_tokens_details</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))</span></span></code></pre></div><h3 id="_6-2-使用-vllm-的-openai-chat-completions-api" tabindex="-1">6.2 使用 vLLM 的 OpenAI Chat Completions API <a class="header-anchor" href="#_6-2-使用-vllm-的-openai-chat-completions-api" aria-label="Permalink to &quot;6.2 使用 vLLM 的 OpenAI Chat Completions API&quot;">​</a></h3><p>vLLM 还支持 OpenAI 的 Chat Completions API。该 API 提供了一种更加动态、交互式的模型交流方式，支持往返对话并在聊天历史中保存上下文。这种方式特别适用于需要保持上下文连贯性或需要更详细解释的任务，能够让模型理解之前的对话内容，从而提供更加连贯、个性化的响应。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">curl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">sS http:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">localhost:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">v1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">chat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">completions \\</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    -</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">H </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> \\</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    -</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">d </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;model&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Qwen/Qwen2.5-1.5B-Instruct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;messages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            {</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;You are a helpful assistant.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            {</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Who won the world series in 2020?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; | jq</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 输出</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;chatcmpl-ff58ca762837455e8388a033245dc254&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;object&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;chat.completion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;created&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1746802744</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;model&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Qwen/Qwen2.5-1.5B-Instruct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;choices&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      &quot;index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;assistant&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;reasoning_content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: null,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;The New York Yankees won the World Series in 2020, defeating the Tampa Bay Rays in seven games.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;tool_calls&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      &quot;logprobs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: null,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      &quot;finish_reason&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;stop&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      &quot;stop_reason&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;usage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    &quot;prompt_tokens&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">31</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    &quot;total_tokens&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">56</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    &quot;completion_tokens&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    &quot;prompt_tokens_details&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;prompt_logprobs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>你同样可以使用 OpenAI 的 Python SDK 进行请求。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> OpenAI</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Set OpenAI&#39;s API key and API base to use vLLM&#39;s API server.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">openai_api_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;EMPTY&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">openai_api_base </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;http://localhost:8000/v1&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">client </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> OpenAI(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">openai_api_key,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    base_url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">openai_api_base,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">chat_response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> client.chat.completions.create(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Qwen/Qwen2.5-1.5B-Instruct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        {</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;You are a helpful assistant.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        {</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Tell me a joke.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Chat response:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, chat_response)</span></span></code></pre></div><p>响应如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Chat</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> response:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ChatCompletion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;chatcmpl-3ba198d6ca6649ea8e621d6e51abc30a&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">choices</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">[Choice</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(finish_reason</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;stop&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> logprobs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ChatCompletionMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Sure, here&#39;s one for you:\\n\\nWhy couldn&#39;t the bicycle stand up by itself?\\n\\nBecause it was two-tired!&quot;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">refusal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> role</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;assistant&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> annotations</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> audio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> function_call</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tool_calls</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">[],</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">reasoning_content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> stop_reason</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">],</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> created</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1746802826</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Qwen/Qwen2.5-1.5B-Instruct&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;chat.completion&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> service_tier</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> system_fingerprint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">usage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">CompletionUsage</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(completion_tokens</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">26</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> prompt_tokens</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">24</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> total_tokens</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">50</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">completion_tokens_details</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> prompt_tokens_details</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> prompt_logprobs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><h2 id="_7-vllm-在使用-gpu-和-cpu-后端时的性能对比" tabindex="-1">7 vLLM 在使用 GPU 和 CPU 后端时的性能对比 <a class="header-anchor" href="#_7-vllm-在使用-gpu-和-cpu-后端时的性能对比" aria-label="Permalink to &quot;7 vLLM 在使用 GPU 和 CPU 后端时的性能对比&quot;">​</a></h2><p>CPU 后端与 GPU 后端在性能上存在显著差距，因为 vLLM 的架构最初是专为 GPU 优化设计的。若使用 CPU 后端，需要进行<a href="https://docs.vllm.ai/en/stable/getting_started/installation/cpu.html?device=x86#performance-tips" target="_blank" rel="noreferrer">一系列优化</a>以提升其运行效率。此外，GPU 拥有更强的并行计算能力，在大语言模型推理任务中相较于 CPU 更具优势。下面我们将简要对比 vLLM 在使用 CPU 和 GPU 后端时的推理性能差距。</p><p>当前进行测试的服务器配置参数如下：</p><ul><li><strong>CPU</strong>：32 vCPU</li><li><strong>内存</strong>：188 GiB</li><li><strong>GPU</strong>：NVIDIA A10</li></ul><p>客户端使用以下命令循环向 vLLM 服务器发送请求：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">1..100}</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">do</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  echo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;Request: </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> http://localhost:8000/v1/chat/completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    -H</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    -d</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      &quot;model&quot;: &quot;Qwen/Qwen2.5-1.5B-Instruct&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      &quot;messages&quot;: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Tell me a joke&quot;}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      ]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    }&#39;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  echo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">done</span></span></code></pre></div><p>vLLM 在 CPU 后端下的启动命令如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">vllm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> serve</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Qwen/Qwen2.5-1.5B-Instruct</span></span></code></pre></div><p>vLLM CPU 后端每秒生成的 token 数大概在 10 几个左右。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:54:24</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [metrics.py:486] Avg prompt throughput: 18.1 tokens/s, Avg generation throughput: 12.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-10</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:54:29</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [metrics.py:486] Avg prompt throughput: 6.5 tokens/s, Avg generation throughput: 15.1 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.</span></span></code></pre></div><p>在 GPU 后端中，vLLM 默认启用 <a href="https://docs.vllm.ai/en/stable/features/automatic_prefix_caching.html" target="_blank" rel="noreferrer">Prefix Caching</a>（v1 版本默认启用，v0 默认禁用），以提升推理性能；而在 CPU 后端中，该功能默认关闭。为确保对比的公平性，添加 <code>--no-enable-prefix-caching</code> 参数手动禁用该功能。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">vllm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> serve</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Qwen/Qwen2.5-1.5B-Instruct</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --no-enable-prefix-caching</span></span></code></pre></div><p>vLLM GPU 后端每秒生成的 token 数大概在 130 几个左右，性能大概是 CPU 后端的 10 倍左右。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-11</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:31:38</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [loggers.py:111] Engine 000: Avg prompt throughput: 135.3 tokens/s, Avg generation throughput: 108.7 tokens/s, Running: 1 reqs, Waiting: 0 reqs, GPU KV cache usage: 0.0%, Prefix cache hit rate: 0.0%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-11</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:31:48</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [loggers.py:111] Engine 000: Avg prompt throughput: 135.3 tokens/s, Avg generation throughput: 108.7 tokens/s, Running: 1 reqs, Waiting: 0 reqs, GPU KV cache usage: 0.0%, Prefix cache hit rate: 0.0%</span></span></code></pre></div><h2 id="_8-总结" tabindex="-1">8 总结 <a class="header-anchor" href="#_8-总结" aria-label="Permalink to &quot;8 总结&quot;">​</a></h2><p>本文系统介绍了高性能 LLM 推理框架 vLLM 的部署实践，涵盖环境准备、GPU/CPU 后端配置、离线推理与在线推理部署等环节。最后通过实际测试，深入比较了两种后端在推理吞吐量和响应速度方面的性能差异。</p><h2 id="_9-欢迎关注" tabindex="-1">9 欢迎关注 <a class="header-anchor" href="#_9-欢迎关注" aria-label="Permalink to &quot;9 欢迎关注&quot;">​</a></h2><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202503222156941.png" alt=""></p>`,113))])}const f=e(c,[["render",A]]);export{q as __pageData,f as default};
