import{_ as p}from"./chunks/ArticleMetadata.B38I6HZO.js";import{_ as k,C as d,c as r,o as l,k as e,G as g,P as o,a as F,w as c,b as y,e as C}from"./chunks/framework.DIkCQIk8.js";import"./chunks/md5.BFEskVOY.js";const _=JSON.parse('{"title":"llm-d","description":"","frontmatter":{"title":"llm-d","author":"Se7en","date":"2025/09/30 12:00","categories":["AI"],"tags":["AI","Inference"]},"headers":[],"relativePath":"blogs/original/2025/22-llm-d.md","filePath":"blogs/original/2025/22-llm-d.md","lastUpdated":1763560723000}'),m={name:"blogs/original/2025/22-llm-d.md"};function u(i,s,D,A,b,E){const n=p,h=d("ClientOnly");return l(),r("div",null,[s[0]||(s[0]=e("h1",{id:"llm-d",tabindex:"-1"},[F("llm-d "),e("a",{class:"header-anchor",href:"#llm-d","aria-label":'Permalink to "llm-d"'},"​")],-1)),g(h,null,{default:c(()=>{var a,t;return[(((a=i.$frontmatter)==null?void 0:a.aside)??!0)&&(((t=i.$frontmatter)==null?void 0:t.showArticleMetadata)??!0)?(l(),y(n,{key:0,article:i.$frontmatter},null,8,["article"])):C("",!0)]}),_:1}),s[1]||(s[1]=o(`<p>Configure and deploy your Gateway control plane.</p><p><a href="https://github.com/llm-d/llm-d/blob/main/guides/prereq/gateway-provider/README.md" target="_blank" rel="noreferrer">https://github.com/llm-d/llm-d/blob/main/guides/prereq/gateway-provider/README.md</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">./install-gateway-provider-dependencies.sh</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helmfile</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kgateway.helmfile.yaml</span></span></code></pre></div><h2 id="创建-huggingface-token" tabindex="-1">创建 HuggingFace Token <a class="header-anchor" href="#创建-huggingface-token" aria-label="Permalink to &quot;创建 HuggingFace Token&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> NAMESPACE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">llm-d-inference-scheduler</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> \${NAMESPACE}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Replace &lt;YOUR_HF_TOKEN&gt; with your Huggingface token</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> HF_TOKEN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">YOUR_HF_TOKE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">N</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> HF_TOKEN_NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">\${HF_TOKEN_NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">llm-d-hf-token}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> secret</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> generic</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> \${HF_TOKEN_NAME} </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    --from-literal=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;HF_TOKEN=\${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">HF_TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">NAMESPACE</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    --dry-run=client</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> yaml</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span></span></code></pre></div><h2 id="安装监控组件" tabindex="-1">安装监控组件 <a class="header-anchor" href="#安装监控组件" aria-label="Permalink to &quot;安装监控组件&quot;">​</a></h2><p><a href="https://github.com/llm-d/llm-d/blob/main/docs/monitoring/prometheus-grafana-stack.md" target="_blank" rel="noreferrer">https://github.com/llm-d/llm-d/blob/main/docs/monitoring/prometheus-grafana-stack.md</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">./scripts/install-prometheus-grafana.sh</span></span></code></pre></div><h2 id="安装-llm-d" tabindex="-1">安装 llm-d <a class="header-anchor" href="#安装-llm-d" aria-label="Permalink to &quot;安装 llm-d&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> NAMESPACE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">llm-d-inference-scheduler</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # or any other namespace</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> guides/inference-scheduling</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helmfile</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kgateway</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> \${NAMESPACE}</span></span></code></pre></div><p>安装 HTTPRoute</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> httproute.yaml</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> \${NAMESPACE}</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> NAMESPACE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">llm-d-inference-scheduler</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> DECODE_PODS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> get pods </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">--no-headers</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">NAMESPACE</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">} </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">-l</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;llm-d.ai/role=decode&quot; </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">-o</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> custom-columns=&quot;:metadata.name&quot;)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">stern</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> \${NAMESPACE} </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$DECODE_PODS</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> paste</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -sd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;|&#39; -)&quot;</span></span></code></pre></div>`,14))])}const N=k(m,[["render",u]]);export{_ as __pageData,N as default};
