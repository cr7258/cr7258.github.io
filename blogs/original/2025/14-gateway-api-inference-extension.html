<!DOCTYPE html>
<html lang="zh" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>为 Kubernetes 提供智能的 LLM 推理路由：Gateway API Inference Extension 深度解析 | Se7en的架构笔记</title>
    <meta name="description" content="个人技术知识库，记录 & 分享个人碎片化、结构化、体系化的技术知识内容。">
    <meta name="generator" content="VitePress v1.0.0-rc.31">
    <link rel="preload stylesheet" href="/assets/style.flO1e0Et.css" as="style">
    
    <script type="module" src="/assets/app._IseUKb2.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.PU6D6dP3.js">
    <link rel="modulepreload" href="/assets/chunks/theme.Dxk0aDMt.js">
    <link rel="modulepreload" href="/assets/chunks/md5.BwKp3kP6.js">
    <link rel="modulepreload" href="/assets/chunks/use-popup-manager.Dyp0-4xE.js">
    <link rel="modulepreload" href="/assets/chunks/DirectoryList.ByNdyoTq.js">
    <link rel="modulepreload" href="/assets/chunks/ArticleMetadata.CHA3f0eO.js">
    <link rel="modulepreload" href="/assets/blogs_original_2025_14-gateway-api-inference-extension.md.DqbTwS9b.lean.js">
    <link rel="icon" href="/favicon.ico">
    <meta name="author" content="Se7en">
    <meta name="keywords" content="Se7en的架构笔记, 知识库, 博客, Se7en">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="theme-color" content="#3c8772">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="zh_CN">
    <meta property="og:title" content="Se7en的架构笔记">
    <meta property="og:description" content="个人技术知识库，记录 &amp; 分享个人碎片化、结构化、体系化的技术知识内容。">
    <meta property="og:site" content="https://blog.charles7c.top">
    <meta property="og:site_name" content="Se7en的架构笔记">
    <meta property="og:image" content="https://blog.charles7c.top/logo.jpg">
    <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?53af4b1a12fbe40810ca7ad39f8db9c7";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-3f85c6fe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-38957207></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-38957207> Skip to content </a><!--]--><!----><header class="VPNav" data-v-3f85c6fe data-v-56df1908><div class="VPNavBar" data-v-56df1908 data-v-d2477b03><div class="container" data-v-d2477b03><div class="title" data-v-d2477b03><div class="VPNavBarTitle has-sidebar" data-v-d2477b03 data-v-9d0050ef><a class="title" href="/" data-v-9d0050ef><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-603183c5><!--]--><!--[-->Se7en的架构笔记<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-d2477b03><div class="curtain" data-v-d2477b03></div><div class="content-body" data-v-d2477b03><!--[--><!--]--><div class="VPNavBarSearch search" data-v-d2477b03><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-d2477b03 data-v-a98cbab0><span id="main-nav-aria-label" class="visually-hidden" data-v-a98cbab0>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-a98cbab0 data-v-f22317b5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-f22317b5><span class="text" data-v-f22317b5><!----><span data-v-f22317b5>博客</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-f22317b5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-f22317b5><div class="VPMenu" data-v-f22317b5 data-v-b7a8ebe6><div class="items" data-v-b7a8ebe6><!--[--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link active" href="/blogs/original/index" data-v-abdd3ae6><!--[-->原创<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/blogs/translate/index" data-v-abdd3ae6><!--[-->翻译<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-a98cbab0 data-v-f22317b5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-f22317b5><span class="text" data-v-f22317b5><!----><span data-v-f22317b5>我的分类</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-f22317b5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-f22317b5><div class="VPMenu" data-v-f22317b5 data-v-b7a8ebe6><div class="items" data-v-b7a8ebe6><!--[--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/categories/issues/index" data-v-abdd3ae6><!--[-->Bug万象集<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/categories/fragments/index" data-v-abdd3ae6><!--[-->个人速查手册<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/categories/tools/index" data-v-abdd3ae6><!--[-->精选工具箱<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/categories/open-source/index" data-v-abdd3ae6><!--[-->开源项目<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/categories/learning/index" data-v-abdd3ae6><!--[-->学习笔记<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-a98cbab0 data-v-f22317b5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-f22317b5><span class="text" data-v-f22317b5><!----><span data-v-f22317b5>我的小册</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-f22317b5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-f22317b5><div class="VPMenu" data-v-f22317b5 data-v-b7a8ebe6><div class="items" data-v-b7a8ebe6><!--[--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/courses/ai-infra/index" data-v-abdd3ae6><!--[-->AI Infra 教程<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/courses/elastic-stack/index" data-v-abdd3ae6><!--[-->Elastic Stack 实战教程<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/courses/observability/index" data-v-abdd3ae6><!--[-->Observability 教程<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/courses/interview/index" data-v-abdd3ae6><!--[-->面试宝典<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/courses/algorithm/index" data-v-abdd3ae6><!--[-->数据结构与算法<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tags" tabindex="0" data-v-a98cbab0 data-v-e9736db8><!--[--><span data-v-e9736db8>我的标签</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/archives" tabindex="0" data-v-a98cbab0 data-v-e9736db8><!--[--><span data-v-e9736db8>我的归档</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-a98cbab0 data-v-f22317b5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-f22317b5><span class="text" data-v-f22317b5><!----><span data-v-f22317b5>关于</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-f22317b5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-f22317b5><div class="VPMenu" data-v-f22317b5 data-v-b7a8ebe6><div class="items" data-v-b7a8ebe6><!--[--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/about/index" data-v-abdd3ae6><!--[-->关于知识库<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7a8ebe6 data-v-abdd3ae6><a class="VPLink link" href="/about/me" data-v-abdd3ae6><!--[-->关于我<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-d2477b03 data-v-b23002df data-v-f22317b5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-f22317b5><span class="text" data-v-f22317b5><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="option-icon" data-v-f22317b5><path d="M0 0h24v24H0z" fill="none"></path><path d=" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z " class="css-c4d79v"></path></svg><!----><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-f22317b5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-f22317b5><div class="VPMenu" data-v-f22317b5 data-v-b7a8ebe6><!----><!--[--><!--[--><div class="items" data-v-b23002df><p class="title" data-v-b23002df>中文</p><!--[--><div class="VPMenuLink" data-v-b23002df data-v-abdd3ae6><a class="VPLink link" href="/en/blogs/original/2025/14-gateway-api-inference-extension" data-v-abdd3ae6><!--[-->English<!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-d2477b03 data-v-9d4f0d8e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-9d4f0d8e data-v-9b04bbb0 data-v-4290b03b><span class="check" data-v-4290b03b><span class="icon" data-v-4290b03b><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-9b04bbb0><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-9b04bbb0><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-d2477b03 data-v-bf64f565 data-v-98e69544><!--[--><a class="VPSocialLink no-icon" href="https://github.com/cr7258/cr7258.github.io" aria-label="github" target="_blank" rel="noopener" data-v-98e69544 data-v-feaf5fce><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-d2477b03 data-v-45e28ed4 data-v-f22317b5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-f22317b5><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-f22317b5><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-f22317b5><div class="VPMenu" data-v-f22317b5 data-v-b7a8ebe6><!----><!--[--><!--[--><div class="group translations" data-v-45e28ed4><p class="trans-title" data-v-45e28ed4>中文</p><!--[--><div class="VPMenuLink" data-v-45e28ed4 data-v-abdd3ae6><a class="VPLink link" href="/en/blogs/original/2025/14-gateway-api-inference-extension" data-v-abdd3ae6><!--[-->English<!--]--></a></div><!--]--></div><div class="group" data-v-45e28ed4><div class="item appearance" data-v-45e28ed4><p class="label" data-v-45e28ed4>切换日光/暗黑模式</p><div class="appearance-action" data-v-45e28ed4><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-45e28ed4 data-v-9b04bbb0 data-v-4290b03b><span class="check" data-v-4290b03b><span class="icon" data-v-4290b03b><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-9b04bbb0><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-9b04bbb0><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-45e28ed4><div class="item social-links" data-v-45e28ed4><div class="VPSocialLinks social-links-list" data-v-45e28ed4 data-v-98e69544><!--[--><a class="VPSocialLink no-icon" href="https://github.com/cr7258/cr7258.github.io" aria-label="github" target="_blank" rel="noopener" data-v-98e69544 data-v-feaf5fce><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-d2477b03 data-v-2b795258><span class="container" data-v-2b795258><span class="top" data-v-2b795258></span><span class="middle" data-v-2b795258></span><span class="bottom" data-v-2b795258></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-3f85c6fe data-v-e765e361><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-e765e361><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-e765e361><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-e765e361>文章</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-e765e361 data-v-8afc29da><button data-v-8afc29da>返回顶部</button><!----></div></div><aside class="VPSidebar" data-v-3f85c6fe data-v-b791a156><div class="curtain" data-v-b791a156></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b791a156><span class="visually-hidden" id="sidebar-aria-label" data-v-b791a156> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-b791a156><section class="VPSidebarItem level-0 collapsible" data-v-b791a156 data-v-d7932bc1><div class="item" role="button" tabindex="0" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><h2 class="text" data-v-d7932bc1><img class="chinese-zodiac" style="position: static; vertical-align: middle; padding-bottom: 3px;" src="/img/svg/chinese-zodiac/snake.svg" title="蛇年" alt="生肖">
            2025年 (19篇)</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d7932bc1><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-d7932bc1><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-d7932bc1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/19-oceanbase-dify-mcp" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-red mr-[6px]" style="font-weight: 550; display: inline-block;">1</div>Dify + OceanBase + MCP：三剑合璧，轻松构建 RAG 应用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/18-higress-llmaz-vllm" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-orange mr-[6px]" style="font-weight: 550; display: inline-block;">2</div>使用 Higress AI 网关代理 vLLM 推理服务</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/17-runai-model-streamer" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-yellow mr-[6px]" style="font-weight: 550; display: inline-block;">3</div>使用 Run:ai Model Streamer 实现模型的高效加载</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/16-context7" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">4</div>AI 乱写代码怎么破？使用 Context7 MCP Server 让 AI 写出靠谱代码!</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/15-rag-higress-es-langchain" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">5</div>使用 LangChain + Higress + Elasticsearch 构建 RAG 应用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/14-gateway-api-inference-extension" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">6</div>为 Kubernetes 提供智能的 LLM 推理路由：Gateway API Inference Extension 深度解析</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/13-gpu-kind-cluster" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">7</div>一键部署 GPU Kind 集群，体验 vLLM 极速推理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/12-manus-ai" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">8</div>Manus 刷屏，全网求邀请码！这款 AI Agent 究竟有多强？</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/11-deepseek-3fs" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">9</div>DeepSeek 开源周第五弹：3FS —— 专为 AI 训练和推理设计的分布式存储</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/10-deepseek-parallelism" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">10</div>DeepSeek 开源周第四弹：DualPipe 和 EPLB —— 优化并行策略</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/09-deepseek-deepgemm" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">11</div>DeepSeek 开源周第三弹：DeepGEMM —— 高效的 FP8 GEMM 库，核心代码仅 300 行！</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/08-deepseek-deepep" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">12</div>DeepSeek 开源周第二弹：DeepEP —— 首个 MoE 模型训练和推理的 EP 通信库</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/07-deepseek-flashmla" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">13</div>DeepSeek 开源周第一弹：FlashMLA —— 大模型推理的“涡轮增压器”</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/06-higress-ai-gateway" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">14</div>提升 AI 服务的稳定性：Higress AI 网关的降级功能介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/05-higress-vs-oneapi" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">15</div>AI 网关对决：Higress 与 OneAPI 的功能对比</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/04-mcp-sse" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">16</div>构建基于 SSE 协议通信的 MCP Server 和 Client</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/03-mcp-client" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">17</div>快速上手：实现你的第一个 MCP Client</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/02-elasticsearch-mcp-server" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">18</div>MCP Server 开发实战：无缝对接 LLM 和 Elasticsearch</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2025/01-mcp" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">19</div>一文带你入门 MCP（模型上下文协议）</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b791a156><section class="VPSidebarItem level-0 collapsible" data-v-b791a156 data-v-d7932bc1><div class="item" role="button" tabindex="0" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><h2 class="text" data-v-d7932bc1><img class="chinese-zodiac" style="position: static; vertical-align: middle; padding-bottom: 3px;" src="/img/svg/chinese-zodiac/dragon.svg" title="龙年" alt="生肖">
            2024年 (3篇)</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d7932bc1><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-d7932bc1><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-d7932bc1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2024/03-higress-ai-plugins" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-red mr-[6px]" style="font-weight: 550; display: inline-block;">1</div>使用 Higress AI 插件对接通义千问大语言模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2024/02-sidecar-containers" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-orange mr-[6px]" style="font-weight: 550; display: inline-block;">2</div>深入剖析 Kubernetes 原生 Sidecar 容器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2024/01-crossplane" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-yellow mr-[6px]" style="font-weight: 550; display: inline-block;">3</div>Crossplane 实战：构建统一的云原生控制平面</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b791a156><section class="VPSidebarItem level-0 collapsible" data-v-b791a156 data-v-d7932bc1><div class="item" role="button" tabindex="0" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><h2 class="text" data-v-d7932bc1><img class="chinese-zodiac" style="position: static; vertical-align: middle; padding-bottom: 3px;" src="/img/svg/chinese-zodiac/rabbit.svg" title="兔年" alt="生肖">
            2023年 (10篇)</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d7932bc1><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-d7932bc1><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-d7932bc1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2023/10-cilium-bgp" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-red mr-[6px]" style="font-weight: 550; display: inline-block;">1</div>使用 Containerlab + Kind 快速部署 Cilium BGP 环境</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2023/09-clusterresourceset" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-orange mr-[6px]" style="font-weight: 550; display: inline-block;">2</div>使用 ClusterResourceSet 为 Cluster API 集群自动安装 CNI 插件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2023/08-cilium-cluster-mesh" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-yellow mr-[6px]" style="font-weight: 550; display: inline-block;">3</div>Cilium 多集群 Cluster Mesh 介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2023/07-vcluster" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">4</div>vCluster -- 基于虚拟集群的多租户方案</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2023/06-kubernetes-multi-cluster-2" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">5</div>Kubernetes 多集群网络方案系列 2 -- Submariner 监控</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2023/05-kubernetes-multi-cluster-1" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">6</div>Kubernetes 多集群网络方案系列 1 -- Submariner 介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2023/04-kubernetes-keycloak-oidc" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">7</div>在 Kubernetes 中使用 Keycloak OIDC Provider 对用户进行身份验证</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2023/03-kubectl-patch" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">8</div>使用 Kubectl Patch 命令更新资源</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2023/02-wasm-in-cloud-native" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">9</div>WebAssembly 在云原生中的实践指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2023/01-argocd-quickstart" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">10</div>ArgoCD 简明教程</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b791a156><section class="VPSidebarItem level-0 collapsible" data-v-b791a156 data-v-d7932bc1><div class="item" role="button" tabindex="0" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><h2 class="text" data-v-d7932bc1><img class="chinese-zodiac" style="position: static; vertical-align: middle; padding-bottom: 3px;" src="/img/svg/chinese-zodiac/tiger.svg" title="虎年" alt="生肖">
            2022年 (13篇)</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d7932bc1><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-d7932bc1><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-d7932bc1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/13-envoy-quickstart" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-red mr-[6px]" style="font-weight: 550; display: inline-block;">1</div>使用 Envoy 作为前端代理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/12.lru" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-orange mr-[6px]" style="font-weight: 550; display: inline-block;">2</div>实现 LRU 缓存算法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/11.nebula" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-yellow mr-[6px]" style="font-weight: 550; display: inline-block;">3</div>Nebula 分布式图数据库介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/10-harbor" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">4</div>Habor 部署指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/09-pulsar" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">5</div>Pulsar 介绍与部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/08-reset-kafka-consumer-offset" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">6</div>如何重置 Kafka 中的 Consumer Offset？</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/07-kafka-big-message" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">7</div>如何往 Kafka 发送大消息？</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/06-kafka-setup" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">8</div>Kafka 生产环境部署指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/05-docker-rootless" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">9</div>Docker Rootless 在非特权模式下运行 Docker</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/04-kubeasz" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">10</div>使用 ezctl 工具部署和管理 Kubernetes 集群</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/03-finalizer" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">11</div>Kubernetes 中的对象是如何删除的：Finalizers 字段介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/02-kubectl-debug" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">12</div>Kubectl debug 调试容器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d7932bc1 data-v-d7932bc1><div class="item" data-v-d7932bc1><div class="indicator" data-v-d7932bc1></div><a class="VPLink link link" href="/blogs/original/2022/01-kubernetes-setup" data-v-d7932bc1><!--[--><p class="text" data-v-d7932bc1><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">13</div>Kubenetes 高可用集群搭建</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-3f85c6fe data-v-18449532><div class="VPDoc has-sidebar has-aside" data-v-18449532 data-v-0ae467e8><!--[--><!--]--><div class="container" data-v-0ae467e8><div class="aside" data-v-0ae467e8><div class="aside-curtain" data-v-0ae467e8></div><div class="aside-container" data-v-0ae467e8><div class="aside-content" data-v-0ae467e8><div class="VPDocAside" data-v-0ae467e8 data-v-67f99659><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-67f99659 data-v-8dfbfb8d><div class="content" data-v-8dfbfb8d><div class="outline-marker" data-v-8dfbfb8d></div><div class="outline-title" role="heading" aria-level="2" data-v-8dfbfb8d>目录</div><nav aria-labelledby="doc-outline-aria-label" data-v-8dfbfb8d><span class="visually-hidden" id="doc-outline-aria-label" data-v-8dfbfb8d> Table of Contents for current page </span><ul class="root" data-v-8dfbfb8d data-v-1ba218a4><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-67f99659></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-0ae467e8><div class="content-container" data-v-0ae467e8><!--[--><!--]--><!----><main class="main" data-v-0ae467e8><div style="position:relative;" class="vp-doc _blogs_original_2025_14-gateway-api-inference-extension" data-v-0ae467e8><div><h1 id="为-kubernetes-提供智能的-llm-推理路由-gateway-api-inference-extension-深度解析" tabindex="-1">为 Kubernetes 提供智能的 LLM 推理路由：Gateway API Inference Extension 深度解析 <a class="header-anchor" href="#为-kubernetes-提供智能的-llm-推理路由-gateway-api-inference-extension-深度解析" aria-label="Permalink to &quot;为 Kubernetes 提供智能的 LLM 推理路由：Gateway API Inference Extension 深度解析&quot;">​</a></h1><!----><p>现代生成式 AI 和大语言模型（LLM）服务给 Kubernetes 带来了独特的流量路由挑战。与典型的短时、无状态 Web 请求不同，LLM 推理会话通常是长时运行、资源密集且部分有状态的。例如，一个基于 GPU 的模型服务器可能同时维护多个活跃的推理会话，并维护内存中的 token 缓存。</p><p>传统的负载均衡器多基于 HTTP 路径或轮询调度，缺乏处理此类工作负载所需的专业能力。这些方案无法识别模型标识或请求的重要性（例如交互式对话请求与批处理作业之间的区别）。企业往往采用临时拼凑的方式应对，但缺乏统一标准的解决方案。</p><p>为了解决这一问题，<a href="https://gateway-api-inference-extension.sigs.k8s.io/" target="_blank" rel="noreferrer">Gateway API Inference Extension</a> 在现有 <a href="https://gateway-api.sigs.k8s.io/" target="_blank" rel="noreferrer">Gateway API</a> 的基础上，添加了针对推理任务的专属路由能力，同时保留了 Gateways 和 HTTPRoutes 等人们熟悉的模型。通过为现有网关添加这一扩展，可以将其转变为“推理网关”（Inference Gateway），帮助用户以“模型即服务”的方式自托管生成式 AI 模型或 LLM。</p><p>Gateway API Inference Extension 可将支持 <a href="https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/ext_proc_filter" target="_blank" rel="noreferrer">ext-proc</a> 的代理或网关（如 Envoy Gateway、kGateway 或 GKE Gateway）升级为推理网关，支持推理平台团队在 Kubernetes 上自建大语言模型服务。</p><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202504101028179.png" alt=""></p><h2 id="主要特性" tabindex="-1">主要特性 <a class="header-anchor" href="#主要特性" aria-label="Permalink to &quot;主要特性&quot;">​</a></h2><p>Gateway API Inference Extension 提供了以下关键特性：</p><ul><li><strong>模型感知路由</strong>：与传统仅基于请求路径进行路由的方式不同，Gateway API Inference Extension 支持根据模型名称进行路由。这一能力得益于网关实现（如 Envoy Proxy）对生成式 AI 推理 API 规范（如 OpenAI API）的支持。该模型感知路由能力同样适用于基于 LoRA（Low-Rank Adaptation）微调的模型。</li><li><strong>服务优先级</strong>：Gateway API Inference Extension 支持为模型指定服务优先级。例如，可为在线对话类任务（对延迟较为敏感）的模型设定更高的 criticality，而对延迟容忍度更高的任务（如摘要生成）的模型则设定较低的优先级。</li><li><strong>模型版本发布</strong>：Gateway API Inference Extension 支持基于模型名称进行流量拆分，从而实现模型版本的渐进式发布与灰度上线。</li><li><strong>推理服务的可扩展性</strong>：Gateway API Inference Extension 定义了一种可扩展模式，允许用户根据自身需求扩展推理服务，实现定制化的路由能力，以应对默认方案无法满足的场景。</li><li><strong>面向推理的可定制负载均衡</strong>：Gateway API Inference Extension 提供了一种专为推理优化的可定制负载均衡与请求路由模式，并在实现中提供了基于模型服务器实时指标的模型端点选择（model endpoint picking）机制。该机制可替代传统负载均衡方式，被称为“模型服务器感知”的智能负载均衡。实践表明，它能够有效降低推理延迟并提升集群中 GPU 的利用率。</li></ul><h2 id="核心-crd" tabindex="-1">核心 CRD <a class="header-anchor" href="#核心-crd" aria-label="Permalink to &quot;核心 CRD&quot;">​</a></h2><p>Gateway API Inference Extension 定义了两个核心 CRD：<a href="https://gateway-api-inference-extension.sigs.k8s.io/api-types/inferencepool/" target="_blank" rel="noreferrer">InferencePool</a> 和 <a href="https://gateway-api-inference-extension.sigs.k8s.io/api-types/inferencemodel/" target="_blank" rel="noreferrer">InferenceModel</a>。</p><h3 id="inferencepool" tabindex="-1">InferencePool <a class="header-anchor" href="#inferencepool" aria-label="Permalink to &quot;InferencePool&quot;">​</a></h3><p>InferencePool 表示一组专注于 AI 推理的 Pod，同时定义了用于路由到这些 Pod 的扩展配置。在 Gateway API 的资源模型中，InferencePool 被视为一种 “Backend” 资源。实际上，它可以用来替代传统的 Kubernetes Service，作为下游服务的目标。</p><p>虽然 InferencePool 在某些方面与 Service 类似（比如选择 Pod 并指定端口），但它提供了专门面向推理场景的增强能力。InferencePool 通过 <code>extensionRef</code> 字段指向一个 EndPoint Picker 来管理推理感知的端点选择，从而根据实时指标（例如请求队列深度和 GPU 内存可用性）做出智能路由决策。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference.networking.x-k8s.io/v1alpha2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">InferencePool</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  targetPortNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  selector</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 选择运行 LLM 服务的 Pod</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    app</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  extensionRef</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 指向 EndPoint Picker</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-epp</span></span></code></pre></div><h3 id="inferencemodel" tabindex="-1">InferenceModel <a class="header-anchor" href="#inferencemodel" aria-label="Permalink to &quot;InferenceModel&quot;">​</a></h3><p>InferenceModel 表示某个推理模型或适配器及其相关配置。该资源用于定义模型的重要性等级（criticality），从而支持基于优先级的请求调度。</p><p>此外，InferenceModel 还支持将用户请求中的“模型名称”平滑地映射到一个或多个后端实际模型名称，便于进行版本管理、灰度发布或适配不同模型格式。多个 InferenceModel 可以关联到同一个 InferencePool 上，从而构建出一个灵活且可扩展的模型路由体系。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference.networking.x-k8s.io/v1alpha2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">InferenceModel</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  modelName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 用户请求中的模型名称</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  criticality</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Standard</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 模型重要性等级</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  poolRef</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 多个 InferenceModel 可以关联到同一个 InferencePool 上</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  targetModels</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 指定后端实际模型名称</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review-1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    weight</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">100</span></span></code></pre></div><h2 id="相关组件" tabindex="-1">相关组件 <a class="header-anchor" href="#相关组件" aria-label="Permalink to &quot;相关组件&quot;">​</a></h2><h3 id="endpoint-picker-epp" tabindex="-1">EndPoint Picker (EPP) <a class="header-anchor" href="#endpoint-picker-epp" aria-label="Permalink to &quot;EndPoint Picker (EPP)&quot;">​</a></h3><p><a href="https://github.com/kubernetes-sigs/gateway-api-inference-extension/tree/main/pkg/epp" target="_blank" rel="noreferrer">EndPoint Picker (EPP)</a> 是专为 AI 推理场景设计的智能流量调度组件。EPP 实现了 Envoy 的 <a href="https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/ext_proc_filter" target="_blank" rel="noreferrer">ext-proc</a>，在 Envoy 转发流量之前，它会先通过 gRPC 请求 EPP，EPP 会指示 Envoy 将请求路由到哪个具体的 Pod。</p><p>EPP 主要实现以下核心功能：</p><h4 id="_1-端点选择" tabindex="-1">1. 端点选择 <a class="header-anchor" href="#_1-端点选择" aria-label="Permalink to &quot;1. 端点选择&quot;">​</a></h4><p>EPP 的首要职责是从 InferencePool 中挑选一个合适的 Pod 作为请求的目标：</p><ul><li>每个 EPP 实例只服务一个 InferencePool（每个 InferencePool 需部署一个 EPP 实例）。</li><li>它根据 InferencePool 的 <code>Selector</code> 字段，从标记为“就绪”的 Pod 中选择目标。</li><li>请求中的 <code>ModelName</code> 必须匹配绑定该 InferencePool 的某个 <code>InferenceModel</code>。</li><li>若找不到匹配的 <code>ModelName</code>，则返回错误响应给网关代理（如 Envoy）。</li></ul><h4 id="_2-流量拆分与模型名重写" tabindex="-1">2. 流量拆分与模型名重写 <a class="header-anchor" href="#_2-流量拆分与模型名重写" aria-label="Permalink to &quot;2. 流量拆分与模型名重写&quot;">​</a></h4><p>EPP 支持灰度发布和模型版本管理：</p><ul><li>通过 <code>InferenceModel</code> 中的配置，实现不同模型版本（如 LoRA 适配器）的流量按比例分配。</li><li>将用户请求中的模型名（<code>ModelName</code>）重写为真实后端模型的名称，支持灵活映射。</li></ul><h4 id="_3-可观测性" tabindex="-1">3. 可观测性 <a class="header-anchor" href="#_3-可观测性" aria-label="Permalink to &quot;3. 可观测性&quot;">​</a></h4><p>EPP 还负责生成与推理流量相关的监控指标：</p><ul><li>提供基于 <code>InferenceModel</code> 的统计数据。</li><li>这些指标可以细化到实际使用的后端模型，方便监控和调优。</li></ul><h3 id="dynamic-lora-adapter-sidecar" tabindex="-1">Dynamic LORA Adapter Sidecar <a class="header-anchor" href="#dynamic-lora-adapter-sidecar" aria-label="Permalink to &quot;Dynamic LORA Adapter Sidecar&quot;">​</a></h3><p><a href="https://github.com/kubernetes-sigs/gateway-api-inference-extension/tree/main/tools/dynamic-lora-sidecar" target="_blank" rel="noreferrer">Dynamic LORA Adapter Sidecar</a> 是一个基于 sidecar 的工具，用于将新的 LoRA 适配器部署到一组正在运行的 vLLM 模型服务器。用户将 sidecar 与 vLLM 服务器一起部署，并通过 ConfigMap 指定希望配置的 LoRA 适配器。sidecar 监视 ConfigMap，并向 vLLM 容器发送加载或卸载请求，以执行用户的配置意图。</p><p>这里顺便再解释一下什么是 LoRA：</p><p>LoRA（Low-Rank Adaptation，低秩自适应）适配器是一种高效微调大模型的技术，它通过在预训练模型的特定层旁添加小型可训练的低秩矩阵，仅更新少量参数即可适配新任务，显著降低计算和存储成本。其核心作用包括：动态加载不同任务适配器实现多任务切换，以及保持原模型权重不变的同时提升微调效率，适用于个性化模型定制和资源受限场景。</p><h2 id="请求流程" tabindex="-1">请求流程 <a class="header-anchor" href="#请求流程" aria-label="Permalink to &quot;请求流程&quot;">​</a></h2><p>为了说明这一切是如何结合在一起的，让我们通过一个请求示例来说明：</p><ol><li>客户端向推理网关发送请求。</li><li>请求到达推理网关后，网关根据 HTTPRoute 的匹配规则将请求路由到相应的 InferencePool。对于 Envoy 支持的 L7 路由器（如 kgateway 或 Istio），通常会通过路由策略和负载均衡来选择请求的目标端点。</li><li>但是对于 InferencePool，请求会首先发送到一个专门的扩展组件——EndPoint Picker (EPP)。EPP 会根据来自 LLM 本身的指标来选择合适的后端 LLM 端点。</li><li>当请求到达 EPP 后，EPP 会从请求正文中提取 modelName。识别出 modelName 后，EPP 会与可用的 InferenceModel 对象的 modelName 字段进行对比，确定相应的后端模型或 LoRA 适配器。例如，若 EPP 检测到的模型名称为 <code>food-review</code>，它会找到匹配的 InferenceModel，并将请求路由到适当的端点，如 <code>food-review-1</code> 或 <code>food-review-2</code>。</li><li>EPP 定义了一系列过滤器，用于选择特定模型对应的端点。它会定期查询各个 LLM Pod 的相关指标（如队列长度、KV 缓存使用情况等），从而选择最适合处理当前请求的 Pod。</li><li>EPP 选定最佳 Pod 后，会将其返回给推理网关。</li><li>推理网关将请求路由到 EPP 选择的 Pod。</li></ol><p><img src="https://chengzw258.oss-cn-beijing.aliyuncs.com/Article/202504101124494.png" alt=""></p><h2 id="实验" tabindex="-1">实验 <a class="header-anchor" href="#实验" aria-label="Permalink to &quot;实验&quot;">​</a></h2><h3 id="环境准备" tabindex="-1">环境准备 <a class="header-anchor" href="#环境准备" aria-label="Permalink to &quot;环境准备&quot;">​</a></h3><p>准备一个 GPU Kubernetes 集群，可以参考我之前写的这篇文章快速搭建：<a href="https://mp.weixin.qq.com/s/TNXrDr59wxcAZF9MhUJGjw" target="_blank" rel="noreferrer">一键部署 GPU Kind 集群，体验 vLLM 极速推理</a>。本实验运行的模型是 <code>meta-llama/Llama-3.1-8B-Instruct</code>，对 GPU 的性能有一定要求，我是用 A100 的 GPU 进行实验的。</p><p>本实验使用的资源文件可以在 Github 上找到：<a href="https://github.com/cr7258/hands-on-lab/tree/main/gateway/gateway-api-inference-extension/get-started" target="_blank" rel="noreferrer">https://github.com/cr7258/hands-on-lab/tree/main/gateway/gateway-api-inference-extension/get-started</a></p><h3 id="创建-hugging-face-token" tabindex="-1">创建 Hugging Face Token <a class="header-anchor" href="#创建-hugging-face-token" aria-label="Permalink to &quot;创建 Hugging Face Token&quot;">​</a></h3><p>需要先在 <a href="https://huggingface.co/settings/token" target="_blank" rel="noreferrer">Hugging Face</a> 创建一个 Token，并且申请 <a href="https://huggingface.co/meta-llama/Llama-3.1-8B" target="_blank" rel="noreferrer">meta-llama/Llama-3.1-8B</a> 模型的使用许可，注意填写信息的时候国家不要选中国，否则会被秒拒。</p><p>然后创建一个 Secret，将 Token 存储在其中。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> secret</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> generic</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> hf-token</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --from-literal=token=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;&lt;your-huggingface-token&gt;&quot;</span></span></code></pre></div><h3 id="部署-vllm" tabindex="-1">部署 vLLM <a class="header-anchor" href="#部署-vllm" aria-label="Permalink to &quot;部署 vLLM&quot;">​</a></h3><p>通过 vLLM 部署推理服务，默认配置为一个副本。如果 GPU 资源充足，可以增加副本数量。同时，配置了 lora-adapter-syncer 作为 sidecar 容器，根据 Configmap 中的配置动态管理 LoRA 适配器的加载与卸载。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 01-gpu-deployment.yaml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">apps/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  selector</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    matchLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      app</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  template</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      labels</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        app</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      containers</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          image</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;vllm/vllm-openai:latest&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          imagePullPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          command</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;python3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;-m&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;vllm.entrypoints.openai.api_server&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          args</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;--model&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;meta-llama/Llama-3.1-8B-Instruct&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;--tensor-parallel-size&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;--port&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;8000&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;--max-num-seq&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;1024&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;--compilation-config&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;3&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;--enable-lora&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;--max-loras&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;2&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;--max-lora-rank&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;8&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;--max-cpu-loras&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;12&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          env</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">            # Enabling LoRA support temporarily disables automatic v1, we want to force it on</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">            # until 0.8.3 vLLM is released.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">VLLM_USE_V1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">PORT</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;8000&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">HUGGING_FACE_HUB_TOKEN</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              valueFrom</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">                secretKeyRef</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">                  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">hf-token</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">                  key</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">token</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">VLLM_ALLOW_RUNTIME_LORA_UPDATING</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          ports</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">containerPort</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">http</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              protocol</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">TCP</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          lifecycle</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            preStop</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              exec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">               command</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">               - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/usr/bin/sleep</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">               - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;30&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          livenessProbe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            httpGet</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              path</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/health</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              port</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">http</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              scheme</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">HTTP</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            periodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            successThreshold</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            failureThreshold</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            timeoutSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          readinessProbe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            httpGet</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              path</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/health</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              port</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">http</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              scheme</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">HTTP</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            periodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            successThreshold</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            failureThreshold</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            timeoutSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          startupProbe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            failureThreshold</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">600</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            initialDelaySeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            periodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            httpGet</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              path</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/health</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              port</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">http</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              scheme</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">HTTP</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          resources</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            limits</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              nvidia.com/gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            requests</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              nvidia.com/gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          volumeMounts</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">mountPath</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/data</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">mountPath</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/dev/shm</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">shm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">adapters</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              mountPath</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;/adapters&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      initContainers</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">lora-adapter-syncer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          tty</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          stdin</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          image</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">us-central1-docker.pkg.dev/k8s-staging-images/gateway-api-inference-extension/lora-syncer:main</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          restartPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          imagePullPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          env</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">DYNAMIC_LORA_ROLLOUT_CONFIG</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">              value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;/config/configmap.yaml&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          volumeMounts</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># DO NOT USE subPath, dynamic configmap updates don&#39;t work on subPaths</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">config-volume</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            mountPath</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:  </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/config</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      restartPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      enableServiceLinks</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      terminationGracePeriodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">130</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">data</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          emptyDir</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">shm</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          emptyDir</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            medium</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Memory</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">adapters</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          emptyDir</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">config-volume</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          configMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-adapters</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ConfigMap</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-adapters</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  configmap.yaml</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    vLLMLoRAConfig:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      name: vllm-llama3-8b-instruct-adapters</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      port: 8000</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      defaultBaseModel: meta-llama/Llama-3.1-8B-Instruct</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      ensureExist:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        models:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          - id: food-review-1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">            source: Kawon/llama3.1-food-finetune_v14_r8</span></span></code></pre></div><p>等待 vLLM 容器启动成功，如果一切正常可以看到如下日志：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vllm-llama3-8b-instruct-545c578498-47wt6</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Defaulted</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> container</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;vllm&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> of:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vllm,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lora-adapter-syncer</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (init)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:39</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [__init__.py:239] Automatically detected platform cuda.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:44</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [api_server.py:759] LoRA dynamic loading &amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">unloading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enabled</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> This</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> should</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ONLY</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> be</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> used</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> local</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> development!</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:44</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [api_server.py:981] vLLM API server version 0.8.2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:44</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [api_server.py:982] args: Namespace(host</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> port</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8000</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> uvicorn_log_level</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;info&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> disable_uvicorn_access_log</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> allow_credentials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> allowed_origins</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">[&#39;*&#39;],</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> allowed_methods</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">[&#39;*&#39;],</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> allowed_headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">[&#39;*&#39;],</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> lora_modules</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> prompt_adapters</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> chat_template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> chat_template_content_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;auto&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> response_role</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;assistant&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ssl_keyfile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ssl_certfile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ssl_ca_certs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> enable_ssl_refresh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ssl_cert_reqs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> root_path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> middleware</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">[],</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> return_tokens_as_token_ids</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> disable_frontend_multiprocessing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> enable_request_id_headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> enable_auto_tool_choice</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tool_call_parser</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tool_parser_plugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;meta-llama/Llama-3.1-8B-Instruct&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> task</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;auto&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tokenizer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hf_config_path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> skip_tokenizer_init</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> revision</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> code_revision</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tokenizer_revision</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tokenizer_mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;auto&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> trust_remote_code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> allowed_local_media_path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> download_dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> load_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;auto&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> config_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ConfigFormat.AUTO:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> &#39;auto&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&gt;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dtype=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kv_cache_dtype=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_model_len=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> guided_decoding_backend=&#39;xgrammar&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> logits_processor_pattern=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model_impl=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> distributed_executor_backend=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pipeline_parallel_size=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tensor_parallel_size=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_expert_parallel=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_parallel_loading_workers=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ray_workers_use_nsight=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> block_size=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_prefix_caching=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_sliding_window=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> use_v2_block_manager=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> num_lookahead_slots=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> seed=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> swap_space=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cpu_offload_gb=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gpu_memory_utilization=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.9</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> num_gpu_blocks_override=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_num_batched_tokens=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_num_partial_prefills=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_long_partial_prefills=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> long_prefill_token_threshold=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_num_seqs=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_logprobs=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_log_stats=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> quantization=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rope_scaling=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rope_theta=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> hf_overrides=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enforce_eager=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_seq_len_to_capture=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8192</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_custom_all_reduce=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tokenizer_pool_size=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tokenizer_pool_type=&#39;ray&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tokenizer_pool_extra_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> limit_mm_per_prompt=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mm_processor_kwargs=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_mm_preprocessor_cache=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_lora=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_lora_bias=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_loras=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_lora_rank=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">16</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lora_extra_vocab_size=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">256</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lora_dtype=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> long_lora_scaling_factors=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_cpu_loras=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> fully_sharded_loras=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_prompt_adapter=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_prompt_adapters=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_prompt_adapter_token=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> device=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> num_scheduler_steps=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> use_tqdm_on_load=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> multi_step_stream_outputs=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> scheduler_delay_factor=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_chunked_prefill=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> speculative_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> speculative_model=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> speculative_model_quantization=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> num_speculative_tokens=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> speculative_disable_mqa_scorer=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> speculative_draft_tensor_parallel_size=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> speculative_max_model_len=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> speculative_disable_by_batch_size=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ngram_prompt_lookup_max=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ngram_prompt_lookup_min=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> spec_decoding_acceptance_method=&#39;rejection_sampler&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> typical_acceptance_sampler_posterior_threshold=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> typical_acceptance_sampler_posterior_alpha=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_logprobs_during_spec_decoding=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model_loader_extra_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ignore_patterns=[],</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> preemption_mode=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> served_model_name=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qlora_adapter_name_or_path=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> show_hidden_metrics_for_version=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> otlp_traces_endpoint=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> collect_detailed_traces=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_async_output_proc=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> scheduling_policy=&#39;fcfs&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> scheduler_cls=&#39;vllm.core.scheduler.Scheduler&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> override_neuron_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> override_pooler_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> compilation_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kv_transfer_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> worker_cls=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> worker_extension_cls=&#39;&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> generation_config=&#39;auto&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> override_generation_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_sleep_mode=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> calculate_kv_scales=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> additional_config=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_reasoning=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reasoning_parser=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_cascade_attn=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_log_requests=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> max_log_len=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable_fastapi_docs=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_prompt_tokens_details=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable_server_load_tracking=False</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:51</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:585] This model supports multiple tasks: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;classify&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;embed&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;reward&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;score&#39;}.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Defaulting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;generate&#39;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:51</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [arg_utils.py:1859] Detected VLLM_USE_V1=1 with LORA. Usage should be considered experimental. Please report any issues on Github.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:51</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:1697] Chunked prefill is enabled with max_num_batched_tokens=2048.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:51</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [config.py:2381] LoRA with chunked prefill is still experimental and may be unstable.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:53</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [core.py:54] Initializing a V1 LLM engine (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">v0.8.2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) with config: model=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;meta-llama/Llama-3.1-8B-Instruct&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, speculative_config=None, tokenizer=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;meta-llama/Llama-3.1-8B-Instruct&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, skip_tokenizer_init=False, tokenizer_mode=auto, revision=None, override_neuron_config=None, tokenizer_revision=None, trust_remote_code=False, dtype=torch.bfloat16, max_seq_len=131072, download_dir=None, load_format=LoadFormat.AUTO, tensor_parallel_size=1, pipeline_parallel_size=1, disable_custom_all_reduce=False, quantization=None, enforce_eager=False, kv_cache_dtype=auto,  device_config=cuda, decoding_config=DecodingConfig(guided_decoding_backend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;xgrammar&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> reasoning_backend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> observability_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ObservabilityConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(show_hidden_metrics</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> otlp_traces_endpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> collect_model_forward_time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> collect_model_execute_time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> served_model_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">meta-llama/Llama-3.1-8B-Instruct,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> num_scheduler_steps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> multi_step_stream_outputs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> enable_prefix_caching</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> chunked_prefill_enabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> use_async_output_proc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">True,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> disable_mm_preprocessor_cache</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">False,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> mm_processor_kwargs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> pooler_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">None,</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> compilation_config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{&quot;level&quot;:3,&quot;custom_ops&quot;:[&quot;none&quot;],&quot;splitting_ops&quot;:[&quot;vllm.unified_attention&quot;,&quot;vllm.unified_attention_with_output&quot;],&quot;use_inductor&quot;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,&quot;compile_sizes&quot;:[],&quot;use_cudagraph&quot;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,&quot;cudagraph_num_of_warmups&quot;:1,&quot;cudagraph_capture_sizes&quot;:[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">512</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,504,496,488,480,472,464,456,448,440,432,424,416,408,400,392,384,376,368,360,352,344,336,328,320,312,304,296,288,280,272,264,256,248,240,232,224,216,208,200,192,184,176,168,160,152,144,136,128,120,112,104,96,88,80,72,64,56,48,40,32,24,16,8,4,2,1],&quot;max_capture_size&quot;:512}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">WARNING</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:54</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [utils.py:2321] Methods determine_num_available_blocks,device_config,get_cache_block_size_bytes,initialize_cache not implemented </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">vllm.v1.worker.gpu_worker.Worker object at 0x73d836b269c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">0&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:55</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [parallel_state.py:954] rank 0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> world size 1 is assigned as DP rank 0, PP rank 0, TP rank 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:55</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [cuda.py:220] Using Flash Attention backend on V1 engine.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:55</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [gpu_model_runner.py:1174] Starting to load model meta-llama/Llama-3.1-8B-Instruct...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:55</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [topk_topp_sampler.py:53] Using FlashInfer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> top-p &amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">top-k</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sampling.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:51:55</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [weight_utils.py:265] Using model weights format [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;*.safetensors&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:52:51</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [weight_utils.py:281] Time spent downloading weights </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> meta-llama/Llama-3.1-8B-Instruct: 55.301468 seconds</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 0/4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;?, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">?it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  25</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 1/4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:00&lt;00:02,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1.25</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  50</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 2/4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:01&lt;00:01,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1.72</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  75</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 3/4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:01&lt;00:00,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1.50</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 4/4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:02&lt;00:00,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1.25</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> safetensors</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> shards:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Completed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 4/4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [00:02&lt;00:00,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1.33</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">it/s]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:52:54</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [loader.py:447] Loading weights took 3.27 seconds</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:52:54</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [punica_selector.py:18] Using PunicaWrapperGPU.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:52:54</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [gpu_model_runner.py:1186] Model loading took 15.1749 GB and 59.268527 seconds</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:53:07</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [backends.py:415] Using cache directory: /root/.cache/vllm/torch_compile_cache/253772ede5/rank_0_0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> vLLM</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;s torch.compile</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 04-05 05:53:07 [backends.py:425] Dynamo bytecode transform time: 12.60 s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 04-05 05:53:13 [backends.py:132] Cache the graph of shape None for later use</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 04-05 05:53:53 [backends.py:144] Compiling a graph for general shape takes 44.37 s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 04-05 05:54:19 [monitor.py:33] torch.compile takes 56.97 s in total</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 04-05 05:54:20 [kv_cache_utils.py:566] GPU KV cache size: 148,096 tokens</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 04-05 05:54:20 [kv_cache_utils.py:569] Maximum concurrency for 131,072 tokens per request: 1.13x</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 04-05 05:55:41 [gpu_model_runner.py:1534] Graph capturing finished in 81 secs, took 0.74 GiB</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">INFO 04-05 05:55:42 [core.py:151] init engine (profile, create kv cache, warmup model) took 167.44 seconds</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">WARNING 04-05 05:55:42 [config.py:1028] Default sampling parameters have been overridden by the model&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">s Hugging Face generation config recommended from the model creator. If this is not intended, please relaunch vLLM instance with </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">--generation-config</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vllm`</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [serving_chat.py:115] Using default chat sampling params from model: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;temperature&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.6</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;top_p&#39;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.9</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [serving_completion.py:61] Using default completion sampling params from model: {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;temperature&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.6</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;top_p&#39;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.9</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [api_server.py:1028] Starting vLLM API server on http://0.0.0.0:8000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:26] Available routes are:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /openapi.json, Methods: GET, HEAD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /docs, Methods: GET, HEAD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /docs/oauth2-redirect, Methods: GET, HEAD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /redoc, Methods: GET, HEAD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /health, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /load, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /ping, Methods: GET, POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /tokenize, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /detokenize, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /v1/models, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /version, Methods: GET</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /v1/chat/completions, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /v1/completions, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /v1/embeddings, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /pooling, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /score, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /v1/score, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /v1/audio/transcriptions, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /rerank, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /v1/rerank, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /v2/rerank, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /invocations, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /v1/load_lora_adapter, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:42</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [launcher.py:34] Route: /v1/unload_lora_adapter, Methods: POST</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     Started</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [1]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     Waiting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> application</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> startup.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     Application</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> startup</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> complete.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     10.244</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.1.1:33920</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;GET /health HTTP/1.1&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> OK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INFO:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     10.244</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.1.1:33922</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;GET /health HTTP/1.1&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> OK</span></span></code></pre></div><p>查看 lora-adapter-syncer sidecar 容器的日志，可以看到加载了 <code>food-review-1</code> 适配器。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:56</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> WARNING</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:266</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  skipped</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> adapters</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> found</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> both</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ensureExist</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ensureNotExist</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:56</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:271</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  adapter</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> food-review-1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:56</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:218</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  food-review-1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> already</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> present</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> localhost:8000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:57</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:276</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  adapters</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> unload</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:55:57</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:310</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  Waiting</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">s</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> before</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> next</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reconciliation...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:02</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:314</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  Periodic</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reconciliation</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> triggered</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:56:02</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:255</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  reconciling</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> localhost:8000</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stored</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> at</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /config/configmap.yaml</span></span></code></pre></div><h3 id="安装-inference-extension-crd" tabindex="-1">安装 Inference Extension CRD <a class="header-anchor" href="#安装-inference-extension-crd" aria-label="Permalink to &quot;安装 Inference Extension CRD&quot;">​</a></h3><p>安装 InferencePool 和 InferenceModel 这两个 CRD。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">VERSION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">v0.2.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://github.com/kubernetes-sigs/gateway-api-inference-extension/releases/download/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$VERSION</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/manifests.yaml</span></span></code></pre></div><h3 id="部署-inferencemodel" tabindex="-1">部署 InferenceModel <a class="header-anchor" href="#部署-inferencemodel" aria-label="Permalink to &quot;部署 InferenceModel&quot;">​</a></h3><p>部署 InferenceModel，将用户请求 <code>food-review</code> 模型的流量转发到示例模型服务器的 <code>food-review-1</code> LoRA 适配器。InferenceModel 通过 <code>poolRef</code> 关联 InferencePool（将在下一小节创建）。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 02-inferencemodel.yaml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference.networking.x-k8s.io/v1alpha2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">InferenceModel</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  modelName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 用户请求中的模型名称</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  criticality</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Standard</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 模型重要性等级</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  poolRef</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 多个 InferenceModel 可以关联到同一个 InferencePool 上</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  targetModels</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 指定后端实际模型名称</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review-1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    weight</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">100</span></span></code></pre></div><h3 id="部署-inferencepool-和-epp" tabindex="-1">部署 InferencePool 和 EPP <a class="header-anchor" href="#部署-inferencepool-和-epp" aria-label="Permalink to &quot;部署 InferencePool 和 EPP&quot;">​</a></h3><p>部署 InferencePool，通过 <code>selector</code> 选择运行 LLM 服务的 Pod，并通过 <code>extensionRef</code> 关联 EPP。EPP 会基于实时指标（如请求队列深度和 GPU 可用内存）做出智能路由决策。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 03-inferencepool-resources.yaml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference.networking.x-k8s.io/v1alpha2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">InferencePool</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  targetPortNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  selector</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 选择运行 LLM 服务的 Pod</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    app</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  extensionRef</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 指向 EndPoint Picker</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-epp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-epp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  selector</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    app</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-epp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  ports</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">protocol</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">TCP</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      port</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9002</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      targetPort</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9002</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      appProtocol</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">http2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  type</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ClusterIP</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">apps/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-epp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    app</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-epp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  selector</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    matchLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      app</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-epp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  template</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      labels</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        app</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-epp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">      # Conservatively, this timeout should mirror the longest grace period of the pods within the pool</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      terminationGracePeriodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">130</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      containers</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">epp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        image</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">us-central1-docker.pkg.dev/k8s-staging-images/gateway-api-inference-extension/epp:main</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        imagePullPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        args</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-poolName</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;vllm-llama3-8b-instruct&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-v</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;4&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">--zap-encoder</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;json&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-grpcPort</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;9002&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">-grpcHealthPort</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;9003&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        env</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">USE_STREAMING</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        ports</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">containerPort</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9002</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">containerPort</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9003</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">metrics</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          containerPort</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9090</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        livenessProbe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          grpc</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            port</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9003</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            service</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference-extension</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          initialDelaySeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          periodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">10</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        readinessProbe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          grpc</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            port</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9003</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">            service</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference-extension</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          initialDelaySeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">          periodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ClusterRole</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">pod-read</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">rules</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;inference.networking.x-k8s.io&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;inferencemodels&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;watch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;pods&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;watch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;inference.networking.x-k8s.io&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;inferencepools&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;watch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;discovery.k8s.io&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;endpointslices&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;watch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">authentication.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">tokenreviews</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">create</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">authorization.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">subjectaccessreviews</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">create</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">---</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ClusterRoleBinding</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">pod-read-binding</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">subjects</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ServiceAccount</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">roleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ClusterRole</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">pod-read</span></span></code></pre></div><h3 id="部署推理网关" tabindex="-1">部署推理网关 <a class="header-anchor" href="#部署推理网关" aria-label="Permalink to &quot;部署推理网关&quot;">​</a></h3><p>当前支持 Gateway API Inference Extension 的网关有 <a href="https://kgateway.dev/" target="_blank" rel="noreferrer">Kgateway</a>，<a href="https://gateway.envoyproxy.io/" target="_blank" rel="noreferrer">Envoy AI Gateway</a> 等，完整的列表可以参考 <a href="https://gateway-api-inference-extension.sigs.k8s.io/implementations" target="_blank" rel="noreferrer">Implementations</a>。</p><p>本文将会以 Kgateway 为例进行演示。</p><p>首先安装 Kgateway 相关的 CRD。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">KGTW_VERSION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">v2.0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --create-namespace</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kgateway-system</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --version</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> $KGTW_VERSION </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">kgateway-crds</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> oci://cr.kgateway.dev/kgateway-dev/charts/kgateway-crds</span></span></code></pre></div><p>然后安装 Kgateway，设置 <code>inferenceExtension.enabled=true</code> 参数启用推理扩展。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kgateway-system</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --version</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> $KGTW_VERSION </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">kgateway</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> oci://cr.kgateway.dev/kgateway-dev/charts/kgateway</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --set</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> inferenceExtension.enabled=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span></span></code></pre></div><p>接着创建 Gateway，<code>gatewayClassName</code> 关联到 Kgateway。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 04-gateway.yaml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">gateway.networking.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Gateway</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference-gateway</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  gatewayClassName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">kgateway</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  listeners</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">http</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    port</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">80</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    protocol</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">HTTP</span></span></code></pre></div><p>确认网关已分配 IP 地址并报告 <code>Programmed=True</code> 状态。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gateway</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> inference-gateway</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">                CLASS</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      ADDRESS</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      PROGRAMMED</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">inference-gateway</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   kgateway</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   172.18</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.0.4</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   True</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">         16</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">s</span></span></code></pre></div><p>部署 HTTPRoute，将流量路由到 InferencePool。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 05-httproute.yaml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">gateway.networking.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">HTTPRoute</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">llm-route</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  parentRefs</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">group</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">gateway.networking.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Gateway</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference-gateway</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  rules</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">backendRefs</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">group</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference.networking.x-k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">InferencePool</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      port</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8000</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # Remove when https://github.com/kgateway-dev/kgateway/issues/10987 is fixed.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    matches</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        type</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">PathPrefix</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">        value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    timeouts</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      request</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">300s</span></span></code></pre></div><p>确认 HTTPRoute 状态条件包含 <code>Accepted=True</code> 和 <code>ResolvedRefs=True</code>：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">kubectl get httproute llm-route -o yaml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">gateway.networking.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">HTTPRoute</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">...</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  parents</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">conditions</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">lastTransitionTime</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;2025-04-05T13:04:35Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      message</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      observedGeneration</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      reason</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Accepted</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      status</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;True&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      type</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Accepted</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">lastTransitionTime</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;2025-04-05T13:06:14Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      message</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      observedGeneration</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      reason</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ResolvedRefs</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      status</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;True&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      type</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ResolvedRefs</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    controllerName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">kgateway.dev/kgateway</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    parentRef</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      group</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">gateway.networking.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Gateway</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference-gateway</span></span></code></pre></div><h3 id="请求验证" tabindex="-1">请求验证 <a class="header-anchor" href="#请求验证" aria-label="Permalink to &quot;请求验证&quot;">​</a></h3><p>至此，我们已完成全部配置工作，接下来可通过 curl 命令向推理网关发送请求进行测试。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">IP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> get gateway/inference-gateway </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">-o</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> jsonpath=&#39;{.status.addresses[0].value}&#39;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">80</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ${IP}</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">${PORT}</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/v1/completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;Content-Type: application/json&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;model&quot;: &quot;food-review&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;prompt&quot;: &quot;Write as if you were a critic: San Francisco&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;max_tokens&quot;: 100,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;temperature&quot;: 0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}&#39;</span></span></code></pre></div><p>响应结果如下，可以看到模型成功处理了请求。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">HTTP/1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> OK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">date:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Sat,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Apr</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2025</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:18:22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">server:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> envoy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">content-type:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> application/json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">x-envoy-upstream-service-time:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1785</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">x-went-into-resp-headers:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">transfer-encoding:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chunked</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;choices&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;finish_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;length&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;index&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;prompt_logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;stop_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;text&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;&#39;s iconic seafood restaurant, Ali&#39;s Bistro, serves a variety of seafood dishes, including sushi, sashimi, and seafood paella. How would you rate Ali&#39;s Bistro 1.0? (1 being lowest and 10 being highest)\n### Step 1: Analyze the menu offerings\nAli&#39;s Bistro offers a diverse range of seafood dishes, including sushi, sashimi, and seafood paella. This variety suggests that the restaurant caters to different tastes and dietary&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;created&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1743859102</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;id&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;cmpl-0046459d-d94f-43b5-b8f4-0898d8e2d50b&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;model&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;food-review-1&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;object&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;text_completion&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;usage&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;completion_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;prompt_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;prompt_tokens_details&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;total_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 111</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h3 id="发布新的适配器版本" tabindex="-1">发布新的适配器版本 <a class="header-anchor" href="#发布新的适配器版本" aria-label="Permalink to &quot;发布新的适配器版本&quot;">​</a></h3><p>接下来，将演示如何发布新的适配器版本。通过修改 <code>vllm-llama3-8b-instruct-adapters</code> ConfigMap，让 lora-adapter-syncer sidecar 容器加载新的适配器到 vLLM 容器。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> edit</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> configmap</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vllm-llama3-8b-instruct-adapters</span></span></code></pre></div><p>更改 Configmap 的配置如下，增加 <code>food-review-2</code> 适配器。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ConfigMap</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-adapters</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  configmap.yaml</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    vLLMLoRAConfig:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      name: vllm-llama3-8b-instruct-adapters</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      port: 8000</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      defaultBaseModel: meta-llama/Llama-3.1-8B-Instruct</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      ensureExist:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        models:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        - id: food-review-1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          source: Kawon/llama3.1-food-finetune_v14_r8</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        # 增加新的适配器</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        - id: food-review-2</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          source: Kawon/llama3.1-food-finetune_v14_r8</span></span></code></pre></div><p>新的适配器版本将实时应用于模型服务器，无需重新启动。查看 lora-adapter-syncer sidecar 容器日志，可以看到加载了 <code>food-review-2</code> 适配器。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:15:21</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:271</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  adapter</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> food-review-2,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> food-review-1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:15:21</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:231</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  loaded</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> food-review-2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:15:21</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:218</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  food-review-1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> already</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> present</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> localhost:8000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:15:21</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:276</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  adapters</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> unload</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:15:21</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:62</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reconcile</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Config</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;/config/configmap.yaml&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> !</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:15:22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:314</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  Periodic</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reconciliation</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> triggered</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:15:22</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:255</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  reconciling</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> localhost:8000</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stored</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> at</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /config/configmap.yaml</span></span></code></pre></div><p>修改 InferenceModel 的配置以 Canary 的方式发布新的适配器版本。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> edit</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> inferencemodel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> food-review</span></span></code></pre></div><p>将 10% 的流量路由到新的 <code>food-review-2</code> 适配器，90% 的流量路由到 <code>food-review-1</code>。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference.networking.x-k8s.io/v1alpha2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">InferenceModel</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  modelName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  criticality</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Standard</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  poolRef</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  targetModels</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review-1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    weight</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">90</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review-2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    weight</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">10</span></span></code></pre></div><p>使用相同的 curl 命令请求多次进行测试，可以观察到 90% 的请求被路由到 <code>food-review-1</code>，10% 的请求被路由到 <code>food-review-2</code>。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ${IP}</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">${PORT}</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/v1/completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;Content-Type: application/json&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;model&quot;: &quot;food-review&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;prompt&quot;: &quot;Write as if you were a critic: San Francisco&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;max_tokens&quot;: 100,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;temperature&quot;: 0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 发送 food-review-1 的请求，可以通过响应的 model 字段辨认</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">HTTP/1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> OK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">date:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Sat,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Apr</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2025</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:18:34</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">server:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> envoy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">content-type:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> application/json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">x-envoy-upstream-service-time:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1780</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">x-went-into-resp-headers:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">transfer-encoding:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chunked</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;choices&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;finish_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;length&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;index&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;prompt_logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;stop_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;text&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;&#39;s iconic seafood restaurant, Ali&#39;s Bistro, serves a variety of seafood dishes, including sushi, sashimi, and seafood paella. How would you rate Ali&#39;s Bistro 1.0? (1 being lowest and 10 being highest)\n### Step 1: Analyze the menu offerings\nAli&#39;s Bistro offers a diverse range of seafood dishes, including sushi, sashimi, and seafood paella. This variety suggests that the restaurant caters to different tastes and dietary&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;created&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1743859115</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;id&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;cmpl-99203056-cb12-4c8e-bae9-23c28c07cdd7&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;model&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;food-review-1&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;object&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;text_completion&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;usage&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;completion_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;prompt_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;prompt_tokens_details&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;total_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 111</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ${IP}</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">${PORT}</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/v1/completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;Content-Type: application/json&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;model&quot;: &quot;food-review&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;prompt&quot;: &quot;Write as if you were a critic: San Francisco&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;max_tokens&quot;: 100,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;temperature&quot;: 0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">HTTP/1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> OK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">date:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Sat,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 05</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Apr</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2025</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:18:38</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">server:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> envoy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">content-type:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> application/json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">x-envoy-upstream-service-time:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2531</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">x-went-into-resp-headers:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">transfer-encoding:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chunked</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 发送到 food-review-2 的请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;choices&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;finish_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;length&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;index&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;prompt_logprobs&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;stop_reason&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      &quot;text&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;&#39;s iconic seafood restaurant, Ali&#39;s Bistro, serves a variety of seafood dishes, including sushi, sashimi, and seafood paella. How would you rate Ali&#39;s Bistro 1.0? (1 being lowest and 10 being highest)\n### Step 1: Analyze the menu offerings\nAli&#39;s Bistro offers a diverse range of seafood dishes, including sushi, sashimi, and seafood paella. This variety suggests that the restaurant caters to different tastes and dietary&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;created&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1743859119</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;id&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;cmpl-6f2e2e5f-a0e7-4ee0-bd54-5b1a2ef23399&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;model&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;food-review-2&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;object&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;text_completion&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;usage&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;completion_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;prompt_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;prompt_tokens_details&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> null,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    &quot;total_tokens&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 111</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>确认新版本的适配器工作正常后，可以修改 InferenceModel 的配置，将 100% 的流量路由到 <code>food-review-2</code>。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">inference.networking.x-k8s.io/v1alpha2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">InferenceModel</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  modelName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  criticality</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">Standard</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  poolRef</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  targetModels</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">food-review-2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">    weight</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">100</span></span></code></pre></div><p>同时修改 <code>vllm-llama3-8b-instruct-adapters</code> ConfigMap，将旧版本 <code>food-review-1</code> 移动到 <code>ensureNotExist</code> 列表中，从服务器卸载旧版本。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">ConfigMap</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">vllm-llama3-8b-instruct-adapters</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  configmap.yaml</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    vLLMLoRAConfig:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      name: vllm-llama3-8b-instruct-adapters</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      port: 8000</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      defaultBaseModel: meta-llama/Llama-3.1-8B-Instruct</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      ensureExist:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        models:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        - id: food-review-2</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          source: Kawon/llama3.1-food-finetune_v14_r8</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      ensureNotExist:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        models:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        - id: food-review-1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          source: Kawon/llama3.1-food-finetune_v14_r8</span></span></code></pre></div><p>观察 lora-adapter-syncer sidecar 容器日志，可以看到卸载了 <code>food-review-1</code> 适配器。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:27:53</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:271</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  adapter</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> food-review-2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:27:53</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:218</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  food-review-2</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> already</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> present</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> localhost:8000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:27:53</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:276</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  adapters</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> unload</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> food-review-1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:27:53</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:247</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  unloaded</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> food-review-1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:27:53</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:62</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reconcile</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Config</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;/config/configmap.yaml&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> !</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:27:56</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:314</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  Periodic</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reconciliation</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> triggered</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2025-04-05</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:27:56</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sidecar.py:255</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  reconciling</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> localhost:8000</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stored</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> at</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /config/configmap.yaml</span></span></code></pre></div><p>此时，所有请求都应该由新的适配器版本提供服务。</p><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>Gateway API Inference Extension 为 Kubernetes 上的 LLM 推理服务提供了专业化的流量路由解决方案。通过模型感知路由、服务优先级和智能负载均衡等特性，它有效提高了 GPU 资源利用率，降低了推理延迟。该扩展通过 InferencePool 和 InferenceModel 两个核心 CRD，结合 EndPoint Picker 和 Dynamic LORA Adapter Sidecar 组件，实现了模型版本的灰度发布与动态 LoRA 适配器管理，为 Kubernetes 上自托管的大语言模型提供了标准化且灵活的解决方案。</p><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ul><li>Gateway API Inference Extension: <a href="https://gateway-api-inference-extension.sigs.k8s.io/" target="_blank" rel="noreferrer">https://gateway-api-inference-extension.sigs.k8s.io/</a></li><li>Gateway API: <a href="https://gateway-api.sigs.k8s.io/" target="_blank" rel="noreferrer">https://gateway-api.sigs.k8s.io/</a></li><li>ext-proc: <a href="https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/ext_proc_filter" target="_blank" rel="noreferrer">https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/ext_proc_filter</a></li><li>InferencePool: <a href="https://gateway-api-inference-extension.sigs.k8s.io/api-types/inferencepool/" target="_blank" rel="noreferrer">https://gateway-api-inference-extension.sigs.k8s.io/api-types/inferencepool/</a></li><li>InferenceModel: <a href="https://gateway-api-inference-extension.sigs.k8s.io/api-types/inferencemodel/" target="_blank" rel="noreferrer">https://gateway-api-inference-extension.sigs.k8s.io/api-types/inferencemodel/</a></li><li>EndPoint Picker (EPP): <a href="https://github.com/kubernetes-sigs/gateway-api-inference-extension/tree/main/pkg/epp" target="_blank" rel="noreferrer">https://github.com/kubernetes-sigs/gateway-api-inference-extension/tree/main/pkg/epp</a></li><li>Dynamic LORA Adapter Sidecar: <a href="https://github.com/kubernetes-sigs/gateway-api-inference-extension/tree/main/tools/dynamic-lora-sidecar" target="_blank" rel="noreferrer">https://github.com/kubernetes-sigs/gateway-api-inference-extension/tree/main/tools/dynamic-lora-sidecar</a></li><li>Implementations: <a href="https://gateway-api-inference-extension.sigs.k8s.io/implementations" target="_blank" rel="noreferrer">https://gateway-api-inference-extension.sigs.k8s.io/implementations</a></li><li>Deep Dive into the Gateway API Inference Extension: <a href="https://kgateway.dev/blog/deep-dive-inference-extensions/" target="_blank" rel="noreferrer">https://kgateway.dev/blog/deep-dive-inference-extensions/</a></li><li>Smarter AI Inference Routing on Kubernetes with Gateway API Inference Extension: <a href="https://kgateway.dev/blog/smarter-ai-reference-kubernetes-gateway-api/" target="_blank" rel="noreferrer">https://kgateway.dev/blog/smarter-ai-reference-kubernetes-gateway-api/</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-0ae467e8 data-v-c1b2f606><!--[--><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--><!--]--><div class="edit-info" data-v-c1b2f606><div class="edit-link" data-v-c1b2f606><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/cr7258/cr7258.github.io/edit/main/docs/blogs/original/2025/14-gateway-api-inference-extension.md" target="_blank" rel="noreferrer" data-v-c1b2f606><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-c1b2f606><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> 不妥之处，敬请雅正<!--]--></a></div><div class="last-updated" data-v-c1b2f606><p class="VPLastUpdated" data-v-c1b2f606 data-v-e4c7a37d>最后更新: <time datetime="2025-04-10T05:21:55.000Z" data-v-e4c7a37d></time></p></div></div><nav class="prev-next" data-v-c1b2f606><div class="pager" data-v-c1b2f606><!----></div><div class="pager" data-v-c1b2f606><a class="VPLink link pager-link next" href="/blogs/original/2025/19-oceanbase-dify-mcp" data-v-c1b2f606><!--[--><span class="desc" data-v-c1b2f606>下一篇</span><span class="title" data-v-c1b2f606><div class="text-color-red mr-[6px]" style="font-weight: 550; display: inline-block;">1</div>Dify + OceanBase + MCP：三剑合璧，轻松构建 RAG 应用</span><!--]--></a></div></nav></footer><!--[--><!--[--><!--[--><div id="comment-container"></div><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about_index.md\":\"ClTyGAWD\",\"about_me.md\":\"BmxhEx6m\",\"archives.md\":\"B90u-CmM\",\"blogs_original_2022_01-kubernetes-setup.md\":\"DGnvN2Cj\",\"blogs_original_2022_02-kubectl-debug.md\":\"CFQyDDJ1\",\"blogs_original_2022_03-finalizer.md\":\"CNJPLl7A\",\"blogs_original_2022_04-kubeasz.md\":\"ClomVKnm\",\"blogs_original_2022_05-docker-rootless.md\":\"BRiDYQFe\",\"blogs_original_2022_06-kafka-setup.md\":\"Db2BnE37\",\"blogs_original_2022_07-kafka-big-message.md\":\"CPaqUMuu\",\"blogs_original_2022_08-reset-kafka-consumer-offset.md\":\"B164RPKM\",\"blogs_original_2022_09-pulsar.md\":\"BYhBDMBq\",\"blogs_original_2022_10-harbor.md\":\"CWuqOk_6\",\"blogs_original_2022_11.nebula.md\":\"DWXG9nBo\",\"blogs_original_2022_12.lru.md\":\"mtC7nES1\",\"blogs_original_2022_13-envoy-quickstart.md\":\"DKmLL6N6\",\"blogs_original_2023_01-argocd-quickstart.md\":\"CGKXLOsc\",\"blogs_original_2023_02-wasm-in-cloud-native.md\":\"BZwGn2Zp\",\"blogs_original_2023_03-kubectl-patch.md\":\"r90t1DlM\",\"blogs_original_2023_04-kubernetes-keycloak-oidc.md\":\"DT18blPJ\",\"blogs_original_2023_05-kubernetes-multi-cluster-1.md\":\"8FG5At_c\",\"blogs_original_2023_06-kubernetes-multi-cluster-2.md\":\"Ca7J7J3N\",\"blogs_original_2023_07-vcluster.md\":\"BSm-4oDC\",\"blogs_original_2023_08-cilium-cluster-mesh.md\":\"By5fkCQR\",\"blogs_original_2023_09-clusterresourceset.md\":\"mbspsDH5\",\"blogs_original_2023_10-cilium-bgp.md\":\"CiLvNX9z\",\"blogs_original_2024_01-crossplane.md\":\"D8U3n6uf\",\"blogs_original_2024_02-sidecar-containers.md\":\"CV1C_pmm\",\"blogs_original_2024_03-higress-ai-plugins.md\":\"DiSeg59U\",\"blogs_original_2025_01-mcp.md\":\"Drb9UbUX\",\"blogs_original_2025_02-elasticsearch-mcp-server.md\":\"DqLNWIN9\",\"blogs_original_2025_03-mcp-client.md\":\"CTMoJ01v\",\"blogs_original_2025_04-mcp-sse.md\":\"D0xxO_eO\",\"blogs_original_2025_05-higress-vs-oneapi.md\":\"Dw6eRPBe\",\"blogs_original_2025_06-higress-ai-gateway.md\":\"DUlW53BR\",\"blogs_original_2025_07-deepseek-flashmla.md\":\"JvAg4apN\",\"blogs_original_2025_08-deepseek-deepep.md\":\"DeBX73Nr\",\"blogs_original_2025_09-deepseek-deepgemm.md\":\"Uue9ny-S\",\"blogs_original_2025_10-deepseek-parallelism.md\":\"Bc0cxSLj\",\"blogs_original_2025_11-deepseek-3fs.md\":\"mspgTQa2\",\"blogs_original_2025_12-manus-ai.md\":\"C1aFzgxo\",\"blogs_original_2025_13-gpu-kind-cluster.md\":\"C7fzgXv_\",\"blogs_original_2025_14-gateway-api-inference-extension.md\":\"DqbTwS9b\",\"blogs_original_2025_15-rag-higress-es-langchain.md\":\"BAcds50S\",\"blogs_original_2025_16-context7.md\":\"DxEGJGRQ\",\"blogs_original_2025_17-runai-model-streamer.md\":\"1bvtbuxc\",\"blogs_original_2025_18-higress-llmaz-vllm.md\":\"D5Y0G-4t\",\"blogs_original_2025_19-oceanbase-dify-mcp.md\":\"B3Ia33-o\",\"blogs_original_index.md\":\"DN9UqtDc\",\"blogs_translate_2023_01-life-of-a-packet-in-kubernetes-part-1.md\":\"0xUOSUHs\",\"blogs_translate_2023_02-life-of-a-packet-in-kubernetes-part-2.md\":\"DddehrVM\",\"blogs_translate_2023_03-life-of-a-packet-in-kubernetes-part-3.md\":\"CDFTnUCG\",\"blogs_translate_2023_04-life-of-a-packet-in-kubernetes-part-4.md\":\"pJ3LT-Vk\",\"blogs_translate_2023_05-git-cheat-sheet-1.md\":\"CfcuTCcq\",\"blogs_translate_2023_06-git-cheat-sheet-2.md\":\"Bbqgr9ll\",\"blogs_translate_2023_07-git-cheat-sheet-3.md\":\"DexGNnp2\",\"blogs_translate_index.md\":\"BRIzbW49\",\"categories_fragments_index.md\":\"CJzrOsUp\",\"categories_fragments_个人速查手册_01-git.md\":\"Bwee3awt\",\"categories_fragments_个人速查手册_02-find-docker-file.md\":\"C2-cvOlG\",\"categories_fragments_个人速查手册_03-idea-shortcut.md\":\"CXhJo2Fj\",\"categories_fragments_个人速查手册_04-ssh-proxy.md\":\"CuzGmrJZ\",\"categories_fragments_个人速查手册_05-docker-command.md\":\"OehTLbyU\",\"categories_fragments_个人速查手册_06-kubernetes-command.md\":\"YWBP312t\",\"categories_fragments_个人速查手册_07.uv.md\":\"DDOHobMc\",\"categories_issues_bug万象集_01-ebpf.md\":\"CZgDP3pT\",\"categories_issues_bug万象集_02-ide.md\":\"Cx9fNzlF\",\"categories_issues_index.md\":\"Cr6geNu3\",\"categories_learning_ai_01-ai.md\":\"5_078oRQ\",\"categories_learning_ai_02-gpu.md\":\"CH-170fa\",\"categories_learning_ai_03-pytorch.md\":\"CKyUdctk\",\"categories_learning_ai_04-mcp.md\":\"EzwK4uuG\",\"categories_learning_ai_05-transformer.md\":\"BU7MRZEg\",\"categories_learning_ebpf_01-ebpf.md\":\"BDitH2ab\",\"categories_learning_ebpf_02-bpftool.md\":\"BA1AtK9W\",\"categories_learning_index.md\":\"DVn2roQ2\",\"categories_learning_云原生_01-istio.md\":\"CeGeAq71\",\"categories_learning_云原生_02-observability.md\":\"Bg8z7QvW\",\"categories_learning_编程语言_01-rust.md\":\"BvnCzpfq\",\"categories_learning_编程语言_02-golang-concurrency.md\":\"DQsIgrIt\",\"categories_learning_编程语言_02-golang-gmp.md\":\"1nEhgtkq\",\"categories_learning_编程语言_03-design-pattern.md\":\"CrCIAyKx\",\"categories_open-source_index.md\":\"Cm43Y61l\",\"categories_open-source_开源项目_01-ai.md\":\"DK2qd-ka\",\"categories_open-source_开源项目_02-web.md\":\"TG4mAMUC\",\"categories_open-source_开源项目_03-mcp.md\":\"DiE4NNHD\",\"categories_open-source_开源项目_04-cloud-native.md\":\"In2N0kcq\",\"categories_tools_index.md\":\"BLtkSH0V\",\"categories_tools_云原生_01-k8s-resource.md\":\"BuwJ9HOA\",\"courses_ai-infra_ai infra 教程_01-vllm-quickstart.md\":\"D234vKKS\",\"courses_ai-infra_ai infra 教程_02-pagedattention.md\":\"CIYNRQGM\",\"courses_ai-infra_ai infra 教程_03-prefix-caching.md\":\"DSKFDszX\",\"courses_ai-infra_ai infra 教程_04-speculative-decoding.md\":\"be_IeiNq\",\"courses_ai-infra_index.md\":\"CrT7bxeu\",\"courses_algorithm_index.md\":\"DxWXY9a4\",\"courses_algorithm_算法_01-hot100.md\":\"D7An9J6j\",\"courses_algorithm_算法_02-template.md\":\"Bdwhp0YT\",\"courses_algorithm_算法_03-design-problem.md\":\"B8XkxTft\",\"courses_algorithm_算法_04-shell.md\":\"BWjnHwM3\",\"courses_elastic-stack_elastic stack 实战教程_01-quick-start.md\":\"B7eKl6jv\",\"courses_elastic-stack_elastic stack 实战教程_02-ilm.md\":\"BIcR8oK-\",\"courses_elastic-stack_elastic stack 实战教程_03-snapshot.md\":\"B50tMZtn\",\"courses_elastic-stack_elastic stack 实战教程_04-fleet.md\":\"uq1AgBeI\",\"courses_elastic-stack_elastic stack 实战教程_05-java-client.md\":\"DD1xDMiS\",\"courses_elastic-stack_index.md\":\"DJlJs71Q\",\"courses_interview_ai_01-ai.md\":\"DlXZQqdx\",\"courses_interview_elastic stack_01-elasticsearch.md\":\"CaWnNa_A\",\"courses_interview_index.md\":\"CkH95BIi\",\"courses_interview_云原生_01-kubernetes.md\":\"vB7IQtHp\",\"courses_interview_云原生_02-container.md\":\"YitjOKar\",\"courses_interview_云原生_03-storage.md\":\"DWYAqEcl\",\"courses_interview_云原生_04-network.md\":\"bUtIrZOb\",\"courses_interview_云原生_05-security.md\":\"CtNpyM6y\",\"courses_interview_云原生_06-rollout.md\":\"BuKoUbs_\",\"courses_interview_云原生_07-operator.md\":\"DhmcWqz3\",\"courses_interview_大数据_01-message-queue.md\":\"D5V5WZeg\",\"courses_interview_操作系统_01-cpu.md\":\"Do2O_AUc\",\"courses_interview_操作系统_02-memory.md\":\"Jd1TtDIX\",\"courses_interview_操作系统_03-storage.md\":\"BVvKZyAf\",\"courses_interview_操作系统_04-network.md\":\"DQ72_ZC3\",\"courses_interview_操作系统_05-cgroup.md\":\"NKcSVzxo\",\"courses_interview_编程语言_01-golang.md\":\"BqapVU-t\",\"courses_interview_编程语言_02-python.md\":\"ChiNg40W\",\"courses_interview_编程语言_03-algorithm.md\":\"q_xOy3J5\",\"courses_observability_opentelemetry_01-opentelemetry-elastic.md\":\"Cx6Rtl-l\",\"courses_observability_index.md\":\"C3Ru8TBp\",\"en_about_index.md\":\"CmCa7_BU\",\"en_about_me.md\":\"BKEqH-v9\",\"en_archives.md\":\"CKhF0VC9\",\"en_courses_elastic-stack_01-elastic-stack-hands-on-lab_01-quick-start.md\":\"5WDgvhl-\",\"en_courses_elastic-stack_01-elastic-stack-hands-on-lab_02-ilm.md\":\"ChJNma7W\",\"en_courses_elastic-stack_01-elastic-stack-hands-on-lab_03-snapshot.md\":\"CgSi6deN\",\"en_courses_elastic-stack_01-elastic-stack-hands-on-lab_04-fleet.md\":\"DVNVb1xI\",\"en_courses_elastic-stack_01-elastic-stack-hands-on-lab_05-java-client.md\":\"BIxxeplW\",\"en_courses_elastic-stack_index.md\":\"UltvLXFf\",\"en_index.md\":\"Crk_ARIP\",\"en_tags.md\":\"CNKWtYvp\",\"index.md\":\"C48x9QOL\",\"meetup_network_01-network_01-cni.md\":\"Vud6wYrY\",\"meetup_network_index.md\":\"BAywDmvY\",\"tags.md\":\"CnYNupHu\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"Se7en的架构笔记\",\"description\":\"个人技术知识库，记录 & 分享个人碎片化、结构化、体系化的技术知识内容。\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"博客\",\"items\":[{\"text\":\"原创\",\"link\":\"/blogs/original/index\",\"activeMatch\":\"/blogs/original/\"},{\"text\":\"翻译\",\"link\":\"/blogs/translate/index\",\"activeMatch\":\"/blogs/translate/\"}],\"activeMatch\":\"/blogs/\"},{\"text\":\"我的分类\",\"items\":[{\"text\":\"Bug万象集\",\"link\":\"/categories/issues/index\",\"activeMatch\":\"/categories/issues/\"},{\"text\":\"个人速查手册\",\"link\":\"/categories/fragments/index\",\"activeMatch\":\"/categories/fragments/\"},{\"text\":\"精选工具箱\",\"link\":\"/categories/tools/index\",\"activeMatch\":\"/categories/tools/\"},{\"text\":\"开源项目\",\"link\":\"/categories/open-source/index\",\"activeMatch\":\"/categories/open-source/\"},{\"text\":\"学习笔记\",\"link\":\"/categories/learning/index\",\"activeMatch\":\"/categories/learning/\"}],\"activeMatch\":\"/categories/\"},{\"text\":\"我的小册\",\"items\":[{\"text\":\"AI Infra 教程\",\"link\":\"/courses/ai-infra/index\",\"activeMatch\":\"/courses/ai-infra/\"},{\"text\":\"Elastic Stack 实战教程\",\"link\":\"/courses/elastic-stack/index\",\"activeMatch\":\"/courses/elastic-stack/\"},{\"text\":\"Observability 教程\",\"link\":\"/courses/observability/index\",\"activeMatch\":\"/courses/observability/\"},{\"text\":\"面试宝典\",\"link\":\"/courses/interview/index\",\"activeMatch\":\"/courses/interview/\"},{\"text\":\"数据结构与算法\",\"link\":\"/courses/algorithm/index\",\"activeMatch\":\"/courses/algorithm/\"}],\"activeMatch\":\"/courses/\"},{\"text\":\"我的标签\",\"link\":\"/tags\",\"activeMatch\":\"/tags\"},{\"text\":\"我的归档\",\"link\":\"/archives\",\"activeMatch\":\"/archives\"},{\"text\":\"关于\",\"items\":[{\"text\":\"关于知识库\",\"link\":\"/about/index\",\"activeMatch\":\"/about/index\"},{\"text\":\"关于我\",\"link\":\"/about/me\",\"activeMatch\":\"/about/me\"}],\"activeMatch\":\"/about/\"}],\"sidebar\":{\"/categories/issues/\":[{\"text\":\"Bug万象集 (2篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>eBPF\",\"link\":\"/categories/issues/Bug万象集/01-ebpf\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>IDE\",\"link\":\"/categories/issues/Bug万象集/02-ide\"}],\"collapsed\":false}],\"/categories/fragments/\":[{\"text\":\"个人速查手册 (7篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Git 速查手册\",\"link\":\"/categories/fragments/个人速查手册/01-git\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>5 种快速查找容器中文件的方法\",\"link\":\"/categories/fragments/个人速查手册/02-find-docker-file\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>IDEA 快捷键\",\"link\":\"/categories/fragments/个人速查手册/03-idea-shortcut\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>使用 ClashX 代理 SSH 连接\",\"link\":\"/categories/fragments/个人速查手册/04-ssh-proxy\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">5</div>Docker 常用命令\",\"link\":\"/categories/fragments/个人速查手册/05-docker-command\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">6</div>Kubernetes 常用命令\",\"link\":\"/categories/fragments/个人速查手册/06-kubernetes-command\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">7</div>uv 速查手册\",\"link\":\"/categories/fragments/个人速查手册/07.uv\"}],\"collapsed\":false}],\"/categories/tools/\":[{\"text\":\"云原生 (1篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>查询 Kubernetes 核心资源字段\",\"link\":\"/categories/tools/云原生/01-k8s-resource\"}],\"collapsed\":false}],\"/categories/learning/\":[{\"text\":\"AI (5篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>AI\",\"link\":\"/categories/learning/AI/01-ai\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>GPU\",\"link\":\"/categories/learning/AI/02-gpu\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>PyTorch\",\"link\":\"/categories/learning/AI/03-pytorch\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>Model Context Protocol（MCP）\",\"link\":\"/categories/learning/AI/04-mcp\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">5</div>Transformer\",\"link\":\"/categories/learning/AI/05-transformer\"}],\"collapsed\":false},{\"text\":\"eBPF (2篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>eBPF 基础\",\"link\":\"/categories/learning/eBPF/01-ebpf\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>bpftool\",\"link\":\"/categories/learning/eBPF/02-bpftool\"}],\"collapsed\":false},{\"text\":\"云原生 (2篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Istio\",\"link\":\"/categories/learning/云原生/01-istio\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>Observability\",\"link\":\"/categories/learning/云原生/02-observability\"}],\"collapsed\":false},{\"text\":\"编程语言 (4篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Rust\",\"link\":\"/categories/learning/编程语言/01-rust\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>Go 并发编程\",\"link\":\"/categories/learning/编程语言/02-golang-concurrency\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>Go GMP\",\"link\":\"/categories/learning/编程语言/02-golang-gmp\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>设计模式\",\"link\":\"/categories/learning/编程语言/03-design-pattern\"}],\"collapsed\":false}],\"/categories/open-source/\":[{\"text\":\"开源项目 (4篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>AI\",\"link\":\"/categories/open-source/开源项目/01-ai\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>Web\",\"link\":\"/categories/open-source/开源项目/02-web\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>MCP\",\"link\":\"/categories/open-source/开源项目/03-mcp\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>云原生\",\"link\":\"/categories/open-source/开源项目/04-cloud-native\"}],\"collapsed\":false}],\"/blogs/original/\":[{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/snake.svg\\\" title=\\\"蛇年\\\" alt=\\\"生肖\\\">\\n            2025年 (19篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Dify + OceanBase + MCP：三剑合璧，轻松构建 RAG 应用\",\"link\":\"/blogs/original//2025/19-oceanbase-dify-mcp\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>使用 Higress AI 网关代理 vLLM 推理服务\",\"link\":\"/blogs/original//2025/18-higress-llmaz-vllm\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>使用 Run:ai Model Streamer 实现模型的高效加载\",\"link\":\"/blogs/original//2025/17-runai-model-streamer\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>AI 乱写代码怎么破？使用 Context7 MCP Server 让 AI 写出靠谱代码!\",\"link\":\"/blogs/original//2025/16-context7\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">5</div>使用 LangChain + Higress + Elasticsearch 构建 RAG 应用\",\"link\":\"/blogs/original//2025/15-rag-higress-es-langchain\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">6</div>为 Kubernetes 提供智能的 LLM 推理路由：Gateway API Inference Extension 深度解析\",\"link\":\"/blogs/original//2025/14-gateway-api-inference-extension\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">7</div>一键部署 GPU Kind 集群，体验 vLLM 极速推理\",\"link\":\"/blogs/original//2025/13-gpu-kind-cluster\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">8</div>Manus 刷屏，全网求邀请码！这款 AI Agent 究竟有多强？\",\"link\":\"/blogs/original//2025/12-manus-ai\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">9</div>DeepSeek 开源周第五弹：3FS —— 专为 AI 训练和推理设计的分布式存储\",\"link\":\"/blogs/original//2025/11-deepseek-3fs\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">10</div>DeepSeek 开源周第四弹：DualPipe 和 EPLB —— 优化并行策略\",\"link\":\"/blogs/original//2025/10-deepseek-parallelism\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">11</div>DeepSeek 开源周第三弹：DeepGEMM —— 高效的 FP8 GEMM 库，核心代码仅 300 行！\",\"link\":\"/blogs/original//2025/09-deepseek-deepgemm\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">12</div>DeepSeek 开源周第二弹：DeepEP —— 首个 MoE 模型训练和推理的 EP 通信库\",\"link\":\"/blogs/original//2025/08-deepseek-deepep\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">13</div>DeepSeek 开源周第一弹：FlashMLA —— 大模型推理的“涡轮增压器”\",\"link\":\"/blogs/original//2025/07-deepseek-flashmla\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">14</div>提升 AI 服务的稳定性：Higress AI 网关的降级功能介绍\",\"link\":\"/blogs/original//2025/06-higress-ai-gateway\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">15</div>AI 网关对决：Higress 与 OneAPI 的功能对比\",\"link\":\"/blogs/original//2025/05-higress-vs-oneapi\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">16</div>构建基于 SSE 协议通信的 MCP Server 和 Client\",\"link\":\"/blogs/original//2025/04-mcp-sse\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">17</div>快速上手：实现你的第一个 MCP Client\",\"link\":\"/blogs/original//2025/03-mcp-client\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">18</div>MCP Server 开发实战：无缝对接 LLM 和 Elasticsearch\",\"link\":\"/blogs/original//2025/02-elasticsearch-mcp-server\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">19</div>一文带你入门 MCP（模型上下文协议）\",\"link\":\"/blogs/original//2025/01-mcp\"}],\"collapsed\":false},{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/dragon.svg\\\" title=\\\"龙年\\\" alt=\\\"生肖\\\">\\n            2024年 (3篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>使用 Higress AI 插件对接通义千问大语言模型\",\"link\":\"/blogs/original//2024/03-higress-ai-plugins\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>深入剖析 Kubernetes 原生 Sidecar 容器\",\"link\":\"/blogs/original//2024/02-sidecar-containers\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>Crossplane 实战：构建统一的云原生控制平面\",\"link\":\"/blogs/original//2024/01-crossplane\"}],\"collapsed\":false},{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/rabbit.svg\\\" title=\\\"兔年\\\" alt=\\\"生肖\\\">\\n            2023年 (10篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>使用 Containerlab + Kind 快速部署 Cilium BGP 环境\",\"link\":\"/blogs/original//2023/10-cilium-bgp\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>使用 ClusterResourceSet 为 Cluster API 集群自动安装 CNI 插件\",\"link\":\"/blogs/original//2023/09-clusterresourceset\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>Cilium 多集群 Cluster Mesh 介绍\",\"link\":\"/blogs/original//2023/08-cilium-cluster-mesh\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>vCluster -- 基于虚拟集群的多租户方案\",\"link\":\"/blogs/original//2023/07-vcluster\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">5</div>Kubernetes 多集群网络方案系列 2 -- Submariner 监控\",\"link\":\"/blogs/original//2023/06-kubernetes-multi-cluster-2\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">6</div>Kubernetes 多集群网络方案系列 1 -- Submariner 介绍\",\"link\":\"/blogs/original//2023/05-kubernetes-multi-cluster-1\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">7</div>在 Kubernetes 中使用 Keycloak OIDC Provider 对用户进行身份验证\",\"link\":\"/blogs/original//2023/04-kubernetes-keycloak-oidc\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">8</div>使用 Kubectl Patch 命令更新资源\",\"link\":\"/blogs/original//2023/03-kubectl-patch\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">9</div>WebAssembly 在云原生中的实践指南\",\"link\":\"/blogs/original//2023/02-wasm-in-cloud-native\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">10</div>ArgoCD 简明教程\",\"link\":\"/blogs/original//2023/01-argocd-quickstart\"}],\"collapsed\":false},{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/tiger.svg\\\" title=\\\"虎年\\\" alt=\\\"生肖\\\">\\n            2022年 (13篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>使用 Envoy 作为前端代理\",\"link\":\"/blogs/original//2022/13-envoy-quickstart\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>实现 LRU 缓存算法\",\"link\":\"/blogs/original//2022/12.lru\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>Nebula 分布式图数据库介绍\",\"link\":\"/blogs/original//2022/11.nebula\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>Habor 部署指南\",\"link\":\"/blogs/original//2022/10-harbor\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">5</div>Pulsar 介绍与部署\",\"link\":\"/blogs/original//2022/09-pulsar\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">6</div>如何重置 Kafka 中的 Consumer Offset？\",\"link\":\"/blogs/original//2022/08-reset-kafka-consumer-offset\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">7</div>如何往 Kafka 发送大消息？\",\"link\":\"/blogs/original//2022/07-kafka-big-message\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">8</div>Kafka 生产环境部署指南\",\"link\":\"/blogs/original//2022/06-kafka-setup\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">9</div>Docker Rootless 在非特权模式下运行 Docker\",\"link\":\"/blogs/original//2022/05-docker-rootless\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">10</div>使用 ezctl 工具部署和管理 Kubernetes 集群\",\"link\":\"/blogs/original//2022/04-kubeasz\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">11</div>Kubernetes 中的对象是如何删除的：Finalizers 字段介绍\",\"link\":\"/blogs/original//2022/03-finalizer\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">12</div>Kubectl debug 调试容器\",\"link\":\"/blogs/original//2022/02-kubectl-debug\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">13</div>Kubenetes 高可用集群搭建\",\"link\":\"/blogs/original//2022/01-kubernetes-setup\"}],\"collapsed\":false}],\"/blogs/translate/\":[{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/rabbit.svg\\\" title=\\\"兔年\\\" alt=\\\"生肖\\\">\\n            2023年 (7篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Git 速查表：专家必备的 14 个 Git 命令\",\"link\":\"/blogs/translate//2023/07-git-cheat-sheet-3\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>Git 速查表：中级用户必备的 12 个 Git 命令\",\"link\":\"/blogs/translate//2023/06-git-cheat-sheet-2\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>Git 速查表：初学者必备的 12 个 Git 命令\",\"link\":\"/blogs/translate//2023/05-git-cheat-sheet-1\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>Kubernetes 中数据包的生命周期 -- 第 4 部分\",\"link\":\"/blogs/translate//2023/04-life-of-a-packet-in-kubernetes-part-4\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">5</div>Kubernetes 中数据包的生命周期 -- 第 3 部分\",\"link\":\"/blogs/translate//2023/03-life-of-a-packet-in-kubernetes-part-3\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">6</div>Kubernetes 中数据包的生命周期 -- 第 2 部分\",\"link\":\"/blogs/translate//2023/02-life-of-a-packet-in-kubernetes-part-2\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">7</div>Kubernetes 中数据包的生命周期 -- 第 1 部分\",\"link\":\"/blogs/translate//2023/01-life-of-a-packet-in-kubernetes-part-1\"}],\"collapsed\":false}],\"/courses/elastic-stack/\":[{\"text\":\"Elastic Stack 实战教程 (5篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Elastic Stack 8 快速上手\",\"link\":\"/courses/elastic-stack/Elastic Stack 实战教程/01-quick-start\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>ILM 索引生命周期管理\",\"link\":\"/courses/elastic-stack/Elastic Stack 实战教程/02-ilm\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>快照备份与恢复\",\"link\":\"/courses/elastic-stack/Elastic Stack 实战教程/03-snapshot\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>使用 Fleet 管理 Elastic Agent 监控应用\",\"link\":\"/courses/elastic-stack/Elastic Stack 实战教程/04-fleet\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">5</div>Elasticsearch Java API Client 开发\",\"link\":\"/courses/elastic-stack/Elastic Stack 实战教程/05-java-client\"}],\"collapsed\":false}],\"/courses/ai-infra/\":[{\"text\":\"AI Infra 教程 (4篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>vLLM 快速部署指南\",\"link\":\"/courses/ai-infra/AI Infra 教程/01-vllm-quickstart\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>vLLM 核心技术 PagedAttention 原理详解\",\"link\":\"/courses/ai-infra/AI Infra 教程/02-pagedattention\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>Prefix Caching 详解：实现 KV Cache 的跨请求高效复用\",\"link\":\"/courses/ai-infra/AI Infra 教程/03-prefix-caching\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>Speculative Decoding 推测解码方案详解\",\"link\":\"/courses/ai-infra/AI Infra 教程/04-speculative-decoding\"}],\"collapsed\":false}],\"/courses/observability/\":[{\"text\":\"OpenTelemetry (1篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>OpenTelemetry × Elastic Observability 系列（一）：整体架构介绍\",\"link\":\"/courses/observability/OpenTelemetry/01-opentelemetry-elastic\"}],\"collapsed\":false}],\"/courses/interview/\":[{\"text\":\"AI (1篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>AI\",\"link\":\"/courses/interview/AI/01-ai\"}],\"collapsed\":false},{\"text\":\"Elastic Stack (1篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Elasticsearch\",\"link\":\"/courses/interview/Elastic Stack/01-elasticsearch\"}],\"collapsed\":false},{\"text\":\"云原生 (7篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Kubernetes\",\"link\":\"/courses/interview/云原生/01-kubernetes\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>容器\",\"link\":\"/courses/interview/云原生/02-container\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>存储\",\"link\":\"/courses/interview/云原生/03-storage\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>网络\",\"link\":\"/courses/interview/云原生/04-network\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">5</div>安全\",\"link\":\"/courses/interview/云原生/05-security\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">6</div>发布\",\"link\":\"/courses/interview/云原生/06-rollout\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">7</div>Operator\",\"link\":\"/courses/interview/云原生/07-operator\"}],\"collapsed\":false},{\"text\":\"大数据 (1篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>消息队列\",\"link\":\"/courses/interview/大数据/01-message-queue\"}],\"collapsed\":false},{\"text\":\"操作系统 (5篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>CPU\",\"link\":\"/courses/interview/操作系统/01-cpu\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>内存\",\"link\":\"/courses/interview/操作系统/02-memory\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>存储\",\"link\":\"/courses/interview/操作系统/03-storage\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>网络\",\"link\":\"/courses/interview/操作系统/04-network\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">5</div>cgroup\",\"link\":\"/courses/interview/操作系统/05-cgroup\"}],\"collapsed\":false},{\"text\":\"编程语言 (3篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Golang\",\"link\":\"/courses/interview/编程语言/01-golang\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>Python\",\"link\":\"/courses/interview/编程语言/02-python\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>数据结构与算法\",\"link\":\"/courses/interview/编程语言/03-algorithm\"}],\"collapsed\":false}],\"/courses/algorithm/\":[{\"text\":\"算法 (4篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Hot 100 算法题\",\"link\":\"/courses/algorithm/算法/01-hot100\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>算法解题套路框架\",\"link\":\"/courses/algorithm/算法/02-template\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>经典设计问题\",\"link\":\"/courses/algorithm/算法/03-design-problem\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>Shell 命令\",\"link\":\"/courses/algorithm/算法/04-shell\"}],\"collapsed\":false}],\"/meetup/network/\":[{\"text\":\"network (1篇)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>CNI (Container Network Interface)\",\"link\":\"/meetup/network/01-network/01-cni\"}],\"collapsed\":false}]},\"sidebarCollapsible\":false,\"logo\":\"/logo.png\",\"outline\":{\"level\":\"deep\",\"label\":\"目录\"},\"darkModeSwitchLabel\":\"切换日光/暗黑模式\",\"sidebarMenuLabel\":\"文章\",\"returnToTopLabel\":\"返回顶部\",\"lastUpdatedText\":\"最后更新\",\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"editLink\":{\"pattern\":\"https://github.com/cr7258/cr7258.github.io/edit/main/docs/:path\",\"text\":\"不妥之处，敬请雅正\"},\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\"}}}}}}},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/cr7258/cr7258.github.io\"}],\"articleMetadataConfig\":{\"author\":\"Se7en\",\"authorLink\":\"/about/me\",\"showViewCount\":false},\"copyrightConfig\":{\"license\":\"署名-相同方式共享 4.0 国际 (CC BY-SA 4.0)\",\"licenseLink\":\"http://creativecommons.org/licenses/by-sa/4.0/\"},\"commentConfig\":{\"type\":\"gitalk\",\"showComment\":true},\"footerConfig\":{\"showFooter\":true,\"copyright\":\"Copyright  2023-2025 Se7en\"}},\"locales\":{\"root\":{\"label\":\"中文\",\"lang\":\"zh\"},\"en\":{\"label\":\"English\",\"lang\":\"en\"}},\"scrollOffset\":90,\"cleanUrls\":true}");</script>
    
  </body>
</html>